"use strict";(self.webpackChunkhuomu=self.webpackChunkhuomu||[]).push([[56],{7353:function(U,l,e){e.r(l),e.d(l,{demos:function(){return O}});var B=e(59496),r=e(39278),O={}},79674:function(U,l,e){e.r(l),e.d(l,{demos:function(){return D}});var B=e(90228),r=e.n(B),O=e(87999),o=e.n(O),x=e(59496),oe=e(76517),D={"curd-demo-0":{component:x.memo(x.lazy(o()(r()().mark(function R(){var y,p;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return y=a.sent,p=y.Normal,a.abrupt("return",{default:p});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-0",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { Normal } from './demo';

export default Normal;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=o()(r()().mark(function p(){var I,a=arguments;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(576).then(e.bind(e,47576));case 2:return s.abrupt("return",(I=s.sent).default.apply(I,a));case 3:case"end":return s.stop()}},p)}));function y(){return R.apply(this,arguments)}return y}()}},"curd-demo-1":{component:x.memo(x.lazy(o()(r()().mark(function R(){var y,p;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return y=a.sent,p=y.ReadDetail,a.abrupt("return",{default:p});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-1",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ReadDetail } from './demo';

export default ReadDetail;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=o()(r()().mark(function p(){var I,a=arguments;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(576).then(e.bind(e,47576));case 2:return s.abrupt("return",(I=s.sent).default.apply(I,a));case 3:case"end":return s.stop()}},p)}));function y(){return R.apply(this,arguments)}return y}()}},"curd-demo-2":{component:x.memo(x.lazy(o()(r()().mark(function R(){var y,p;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return y=a.sent,p=y.RemoteData,a.abrupt("return",{default:p});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-2",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { RemoteData } from './demo';

export default RemoteData;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=o()(r()().mark(function p(){var I,a=arguments;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(576).then(e.bind(e,47576));case 2:return s.abrupt("return",(I=s.sent).default.apply(I,a));case 3:case"end":return s.stop()}},p)}));function y(){return R.apply(this,arguments)}return y}()}},"curd-demo-3":{component:x.memo(x.lazy(o()(r()().mark(function R(){var y,p;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return y=a.sent,p=y.Ref,a.abrupt("return",{default:p});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-3",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { Ref } from './demo';

export default Ref;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=o()(r()().mark(function p(){var I,a=arguments;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(576).then(e.bind(e,47576));case 2:return s.abrupt("return",(I=s.sent).default.apply(I,a));case 3:case"end":return s.stop()}},p)}));function y(){return R.apply(this,arguments)}return y}()}},"curd-demo-4":{component:x.memo(x.lazy(o()(r()().mark(function R(){var y,p;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return y=a.sent,p=y.ActionRef,a.abrupt("return",{default:p});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-4",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ActionRef } from './demo';

export default ActionRef;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=o()(r()().mark(function p(){var I,a=arguments;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(576).then(e.bind(e,47576));case 2:return s.abrupt("return",(I=s.sent).default.apply(I,a));case 3:case"end":return s.stop()}},p)}));function y(){return R.apply(this,arguments)}return y}()}}}},69059:function(U,l,e){e.r(l),e.d(l,{demos:function(){return D}});var B=e(90228),r=e.n(B),O=e(87999),o=e.n(O),x=e(59496),oe=e(63207),D={"value_type_map-demo-0":{component:x.memo(x.lazy(o()(r()().mark(function R(){var y,p,I,a,M,s,q,K,f,X,Z,k,_,ee;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return k=function(){return k=o()(r()().mark(function z(){var ne;return r()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return ne=K(5).map(function(re){return{id:"".concat(re),timeStr:"2024-10-01 10:00:00",timeNumber:+X("2024-10-01 10:00:00"),dateStr:"2024-10-01",dateNumber:+X("2024-10-01")}}),Y.abrupt("return",Promise.resolve({data:{data:ne,success:!0,totalSize:100}}));case 2:case"end":return Y.stop()}},z)})),k.apply(this,arguments)},Z=function(){return k.apply(this,arguments)},C.next=4,Promise.resolve().then(e.bind(e,60967));case 4:return y=C.sent,p=y.CURD,I=y.customValueTypeMap,a=y.CustomValueTypeEnum,C.next=10,Promise.resolve().then(e.bind(e,73975));case 10:return M=C.sent,s=M.ProConfigProvider,C.next=14,Promise.resolve().then(e.bind(e,15337));case 14:return q=C.sent,K=q.range,C.next=18,Promise.resolve().then(e.t.bind(e,28026,23));case 18:return f=C.sent,X=f.default,_=function(){var z=[{title:"id",dataIndex:"id"},{title:"\u65F6\u95F4 str",dataIndex:"timeStr",valueType:a.CustomDateTimeAndDateRange,search:!0},{title:"\u65F6\u95F4 number",dataIndex:"timeNumber",valueType:a.CustomDateTimeAndDateRange,search:!0},{title:"\u65E5\u671F str",dataIndex:"dateStr",valueType:a.CustomDateAndDateRange,search:!0},{title:"\u65E5\u671F number",dataIndex:"dateNumber",valueType:a.CustomDateAndDateRange,search:!0}];return x.createElement(p,{actions:[],hmTableProps:{hmColumns:z,hmRequest:Z}})},ee=function(){return x.createElement(s,{valueTypeMap:I},x.createElement(_,null))},C.abrupt("return",{default:ee});case 23:case"end":return C.stop()}},R)})))),asset:{type:"BLOCK",id:"value_type_map-demo-0",refAtomIds:["value_type_map"],dependencies:{"index.tsx":{type:"FILE",value:`import { CURD, customValueTypeMap, CustomValueTypeEnum } from '@huomu/core';
import { ProConfigProvider } from '@ant-design/pro-components';
import { range } from 'lodash-es';
import dayjs from 'dayjs';

async function fakeHMRequest() {
  const data = range(5).map((item) => ({
    id: \`\${item}\`,
    timeStr: \`2024-10-01 10:00:00\`,
    timeNumber: +dayjs('2024-10-01 10:00:00'),
    dateStr: \`2024-10-01\`,
    dateNumber: +dayjs('2024-10-01'),
  }));

  return Promise.resolve({
    data: {
      data,
      success: true,
      totalSize: 100,
    },
  }) as Promise<any>;
}

const Table = () => {
  const hmColumns: any[] = [
    {
      title: 'id',
      dataIndex: 'id',
    },
    {
      title: '\u65F6\u95F4 str',
      dataIndex: 'timeStr',
      valueType: CustomValueTypeEnum.CustomDateTimeAndDateRange,
      search: true,
    },
    {
      title: '\u65F6\u95F4 number',
      dataIndex: 'timeNumber',
      valueType: CustomValueTypeEnum.CustomDateTimeAndDateRange,
      search: true,
    },
    {
      title: '\u65E5\u671F str',
      dataIndex: 'dateStr',
      valueType: CustomValueTypeEnum.CustomDateAndDateRange,
      search: true,
    },
    {
      title: '\u65E5\u671F number',
      dataIndex: 'dateNumber',
      valueType: CustomValueTypeEnum.CustomDateAndDateRange,
      search: true,
    },
  ];

  return (
    <CURD
      actions={[]}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeHMRequest,
      }}
    />
  );
};

const Demo = () => (
  <ProConfigProvider valueTypeMap={customValueTypeMap}>
    <Table />
  </ProConfigProvider>
);

export default Demo;`},"@huomu/core":{type:"NPM",value:"1.3.3"},"@ant-design/pro-components":{type:"NPM",value:"2.7.15"},"lodash-es":{type:"NPM",value:"4.17.21"},dayjs:{type:"NPM",value:"1.11.12"}},entry:"index.tsx"},context:{"@huomu/core":e(60967),"@ant-design/pro-components":e(73975),"lodash-es":e(15337),dayjs:e(28026)},renderOpts:{compile:function(){var R=o()(r()().mark(function p(){var I,a=arguments;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(576).then(e.bind(e,47576));case 2:return s.abrupt("return",(I=s.sent).default.apply(I,a));case 3:case"end":return s.stop()}},p)}));function y(){return R.apply(this,arguments)}return y}()}}}},99512:function(U,l,e){e.r(l),e.d(l,{demos:function(){return O}});var B=e(59496),r=e(43797),O={}},99454:function(U,l,e){e.r(l),e.d(l,{demos:function(){return O}});var B=e(59496),r=e(8074),O={}},37209:function(U,l,e){e.r(l),e.d(l,{demos:function(){return O}});var B=e(59496),r=e(93112),O={}},20321:function(U,l,e){e.r(l),e.d(l,{ActionRef:function(){return Ce},Normal:function(){return xe},ReadDetail:function(){return Te},Ref:function(){return Ee},RemoteData:function(){return Pe}});var B=e(90228),r=e.n(B),O=e(87999),o=e.n(O),x=e(48305),oe=e.n(x),D=e(26068),R=e.n(D),y=e(59496),p=e(60967),I=e(21941),a=e(68908),M=e(53992),s=e(32282),q=e(62802),K={\u5E7F\u5DDE:["\u767D\u4E91","\u9EC4\u57D4","\u589E\u57CE"],\u6DF1\u5733:["\u798F\u7530","\u5357\u5C71","\u5B9D\u5B89"]},f={HIGH:{text:"\u9AD8"},MEDIUM:{text:"\u4E2D"},LOW:{text:"\u4F4E"}},X=[{value:"0",label:"\u7B2C\u4E00\u5C0F\u5B66"},{value:"1",label:"\u7B2C\u4E8C\u5C0F\u5B66"},{value:"2",label:"\u7B2C\u4E09\u5C0F\u5B66"}];function Z(m){return Math.floor(Math.random()*m)}function k(){return Object.keys(K)[Z(Object.keys(K).length+1)]}function _(m){if(m.city)return m.city&&K[m.city][Z(K[m.city].length+1)]}function ee(){return Object.keys(f)[Z(Object.keys(f).length+1)]}function le(m){return(0,q.Z)(m).map(function(g){var T=k(),i=_({city:T});return{id:"".concat(g),name:"\u8FD9\u662F\u540D\u5B57\u8FD9\u662F\u540D\u5B57 ".concat(g),city:T,area:i,level:ee(),status:Z(2)===1,school:""+Z(X.length)}})}var C=le(21);function W(m){return z.apply(this,arguments)}function z(){return z=o()(r()().mark(function m(g){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMRequest",g),i.abrupt("return",new Promise(function(E){setTimeout(function(){E({data:{data:C,success:!0,totalSize:C.length}})},1e3)}));case 2:case"end":return i.stop()}},m)})),z.apply(this,arguments)}function ne(m){return te.apply(this,arguments)}function te(){return te=o()(r()().mark(function m(g){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMDeleteById",g),C=C.filter(function(E){return E.id!==g.id}),i.abrupt("return",Promise.resolve({}));case 3:case"end":return i.stop()}},m)})),te.apply(this,arguments)}function Y(m){return re.apply(this,arguments)}function re(){return re=o()(r()().mark(function m(g){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMGetById",g),i.abrupt("return",new Promise(function(E){setTimeout(function(){E({data:{data:C.find(function(J){return J.id===g.id})}})},1e3)}));case 2:case"end":return i.stop()}},m)})),re.apply(this,arguments)}function ae(m){return ie.apply(this,arguments)}function ie(){return ie=o()(r()().mark(function m(g){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMAdd",g),C.push(R()({id:C.length+1},g)),i.abrupt("return",Promise.resolve({}));case 3:case"end":return i.stop()}},m)})),ie.apply(this,arguments)}function he(m){return me.apply(this,arguments)}function me(){return me=o()(r()().mark(function m(g){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMUpdateById",g),C=C.map(function(E){return E.id===g.id?R()(R()({},E),g):E}),i.abrupt("return",Promise.resolve({}));case 3:case"end":return i.stop()}},m)})),me.apply(this,arguments)}function w(){return Promise.resolve(Object.keys(K))}function ge(m){return m!=null&&m.city?Promise.resolve(K[m.city]):Promise.resolve(Object.values(K).reduce(function(g,T){return g.concat(T)},[]))}function De(){return Promise.resolve(X)}var A=e(4637),xe=function(){var g=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57(\u7701\u7565)",dataIndex:"name",search:!0,ellipsis:!0},{title:"city",dataIndex:"city"},{title:"area",dataIndex:"area"}];return(0,A.jsx)(p.CURD,{actions:["create","read","delete","update"],hmTableProps:{hmColumns:g,hmRequest:W},deleteProps:{nameIndex:"name",deleteById:ne},detailForm:function(i){return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.Z,R()(R()({},i),{},{name:"name",label:"\u540D\u5B57",required:!0,rules:[{required:!0}]}))})},requestGetById:Y,requestAdd:ae,requestUpdateById:he})};function Te(){var m=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,A.jsx)(p.CURD,{actions:["read_detail"],hmTableProps:{hmColumns:m,hmRequest:W}})}function Ee(){var m=(0,y.useRef)(),g=M.A.useForm(),T=oe()(g,1),i=T[0];window._detailFormInstance=i;var E=M.A.useWatch("name",m.current),J=M.A.useWatch("name",i);console.log("useWatch",E,J);var G=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,A.jsx)(p.CURD,{actions:["create","read","update"],hmTableProps:{formRef:m,hmColumns:G,hmRequest:W},detailFormInstance:i,detailForm:function(ue){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(a.Z,R()(R()({},ue),{},{name:"name",label:"\u540D\u5B57",required:!0,rules:[{required:!0}],initialValue:"default"})),(0,A.jsx)(s.Z,R()(R()({},ue),{},{name:"status",label:"\u5F00\u542F",initialValue:!1}))]})},requestGetById:Y,requestAdd:ae,requestUpdateById:he})}function Ce(){var m=(0,y.useRef)(),g=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(I.ZP,{onClick:function(){var i;return(i=m.current.getActionRef().current)===null||i===void 0?void 0:i.reload()},children:"reload"}),(0,A.jsx)(p.CURD,{ref:m,actions:[],hmTableProps:{hmColumns:g,hmRequest:W}})]})}function Pe(){var m=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0},{title:"\u7B49\u7EA7(\u672C\u5730\u6570\u636E)",dataIndex:"level",search:!0,valueEnum:f},{title:"city(\u8FDC\u7AEF\u6570\u636E)",dataIndex:"city",search:!0,request:function(){var g=o()(r()().mark(function i(){var E;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,w();case 2:return E=G.sent,G.abrupt("return",E.map(function(b){return{label:b,value:b}})||[]);case 4:case"end":return G.stop()}},i)}));function T(){return g.apply(this,arguments)}return T}()},{title:"area(\u8054\u52A8 city)",dataIndex:"area",search:!0,request:function(){var g=o()(r()().mark(function i(E){var J;return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return console.log("params",E),b.next=3,ge(E);case 3:return J=b.sent,b.abrupt("return",J.map(function(ue){return{label:ue,value:ue}})||[]);case 5:case"end":return b.stop()}},i)}));function T(i){return g.apply(this,arguments)}return T}(),dependencies:["city"]},{title:"\u5B66\u6821(\u8FDC\u7AEF\u6570\u636E label value)",dataIndex:"school",search:!0,valueType:"select",request:function(){return De()}}];return(0,A.jsx)(p.CURD,{actions:[],hmTableProps:{hmColumns:m,hmRequest:W}})}},60967:function(U,l,e){e.r(l),e.d(l,{CURD:function(){return ie},CURDDetail:function(){return ae},CustomValueTypeEnum:function(){return ve},EditorJSON:function(){return g},EditorJavascript:function(){return Pe},EditorMarkdown:function(){return J},FileUpload:function(){return ue},HMDescriptions:function(){return De},HMTable:function(){return _},NumberSwitch:function(){return Se},OperateDelete:function(){return W},createStore:function(){return We},customValueTypeMap:function(){return Ze},getTableScroll:function(){return ee},useDelete:function(){return C}});var B=e(15558),r=e.n(B),O=e(26068),o=e.n(O),x=e(73197),oe=e(21941),D=e(59496),R=e(5791),y=e(33553),p=e(90228),I=e.n(p),a=e(67825),M=e.n(a),s=e(87999),q=e.n(s),K=e(19525),f=e(4637),X=["current","pageSize"],Z=["hmRequest","request","hmColumns","columns","rowKey"];function k(n){return function(){var t=q()(I()().mark(function u(d){var c,h,v,P;return I()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return c=d.current,h=d.pageSize,v=M()(d,X),j.next=3,n(o()({page:c,pageSize:h},v));case 3:return P=j.sent,j.abrupt("return",{data:P.data.data,success:P.data.success,total:P.data.totalSize});case 5:case"end":return j.stop()}},u)}));return function(u){return t.apply(this,arguments)}}()}function _(n){var t=n.hmRequest,u=n.request,d=n.hmColumns,c=n.columns,h=n.rowKey,v=h===void 0?"id":h,P=M()(n,Z),$=(0,D.useCallback)(function(H){return t?k(t)(H):u(H,{},{})},[t,u]),j=(0,D.useMemo)(function(){return d?d.map(function(H){return o()({search:!1},H)}):c},[c,d]);return(0,f.jsx)(K.Z,o()({cardBordered:!0,rowKey:v,pagination:o()({showSizeChanger:!0,showQuickJumper:!0},P.pagination),options:!1,request:$,columns:j},P))}function ee(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:120,u={x:0,y:void 0};return n==null||n.forEach(function(d){d.hideInTable||(u.x+=Number(d.width)||t)}),u}var le=e(90037);function C(n){var t=n.name,u=n.desc,d=n.onDelete,c=(0,D.useCallback)(function(){le.Z.confirm({title:"\u786E\u8BA4\u5220\u9664 \u201C".concat(t,"\u201D \u5417\uFF1F"),content:u||"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){d()}})},[t,u,d]);return{doDelete:c}}function W(n){var t=n.name,u=n.desc,d=n.onDelete,c=(0,D.useCallback)(function(){le.Z.confirm({title:"\u786E\u8BA4\u5220\u9664 \u201C".concat(t,"\u201D \u5417\uFF1F"),content:u||"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){d()}})},[t,u,d]);return(0,f.jsx)("a",{style:{color:"red"},onClick:c,children:"\u5220\u9664"})}var z=e(48305),ne=e.n(z),te=e(75379),Y=e(53992),re=e(33417);function ae(n){var t=n.action,u=n.id,d=n.record,c=n.trigger,h=n.onSuccess,v=n.detailForm,P=n.requestGetById,$=n.requestGetByRecord,j=n.requestAdd,H=n.requestUpdateById,pe=n.detailFormInstance,ye=(0,D.useState)(!1),ce=ne()(ye,2),Q=ce[0],fe=ce[1],se=Y.A.useForm(pe),Re=ne()(se,1),F=Re[0],Ie=(0,D.useCallback)(function(){var de=q()(I()().mark(function L(Ue){return I()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(N.prev=0,!(t==="create"&&j)){N.next=5;break}return N.next=4,j(Ue);case 4:te.ZP.open({type:"success",content:"\u521B\u5EFA\u6210\u529F"});case 5:if(!(t==="update"&&H)){N.next=9;break}return N.next=8,H(o()(o()({},Ue),{},{id:u}));case 8:te.ZP.open({type:"success",content:"\u66F4\u65B0\u6210\u529F"});case 9:return h==null||h(),N.abrupt("return",!0);case 13:N.prev=13,N.t0=N.catch(0),setTimeout(function(){throw N.t0},10);case 16:case"end":return N.stop()}},L,null,[[0,13]])}));return function(L){return de.apply(this,arguments)}}(),[t,j,H,h,u]),S=(0,D.useCallback)(function(de){if(!de){F==null||F.resetFields(),fe(de);return}if(fe(de),u){if(P)return P({id:u}).then(function(L){F==null||F.setFieldsValue(L.data.data)});if($)return $(d).then(function(L){F==null||F.setFieldsValue(L.data.data)})}},[F,u,P,$,d]),V=(0,D.useMemo)(function(){return!Q||!v?null:v({readonly:t==="read"&&!!u},{action:t})},[Q,v,t,u]);return(0,f.jsxs)(re.a,{form:F,trigger:c,autoFocusFirstInput:!0,onFinish:Ie,onOpenChange:S,layout:"vertical",readonly:t==="read"&&!!u,drawerProps:{destroyOnClose:!0},children:[(0,f.jsx)("div",{className:"h-[20px]"}),V]})}var ie=(0,D.forwardRef)(function(t,u){var d=t.actions,c=t.hmTableProps,h=t.createButton,v=t.deleteProps,P=t.detailIdIndex,$=t.detailForm,j=t.requestGetById,H=t.requestGetByRecord,pe=t.requestAdd,ye=t.requestUpdateById,ce=t.detailFormInstance,Q=(0,D.useRef)(),fe=(0,R.TH)();(0,D.useImperativeHandle)(u,function(){return{getActionRef:function(){return Q}}},[Q]);var se=(0,D.useMemo)(function(){return{detailForm:$,requestGetById:j,requestGetByRecord:H,requestAdd:pe,requestUpdateById:ye,detailFormInstance:ce}},[$,pe,j,H,ye,ce]),Re=(0,D.useCallback)(function(S){return function(){if(v!=null&&v.deleteById)return v.deleteById({id:S.id,ids:[S.id]}).then(function(){var V;(V=Q.current)===null||V===void 0||V.reload()});if(v!=null&&v.deleteByRecord)return v.deleteByRecord(S).then(function(){var V;(V=Q.current)===null||V===void 0||V.reload()});throw new Error("\u6CA1\u6709\u4F20 deleteById or deleteByRecord")}},[v]),F=(0,D.useCallback)(function(){var S;(S=Q.current)===null||S===void 0||S.reload()},[]),Ie=(0,D.useMemo)(function(){var S={title:"\u64CD\u4F5C",fixed:"right",width:120,render:function(de,L){return(0,f.jsxs)(x.Z,{children:[d.includes("read")&&(0,f.jsx)(ae,o()({id:L.id,record:L,onSuccess:F,trigger:(0,f.jsx)("a",{children:"\u67E5\u770B"}),action:"read"},se)),d.includes("read_detail")&&(0,f.jsx)(y.rU,{to:"".concat(fe.pathname,"/detail/").concat(L[P||"id"]),children:"\u67E5\u770B"}),d.includes("update")&&(0,f.jsx)(ae,o()({id:L.id,record:L,onSuccess:F,trigger:(0,f.jsx)("a",{children:"\u7F16\u8F91"}),action:"update"},se)),d.includes("delete")&&v&&(0,f.jsx)(W,{name:L[v.nameIndex],desc:v.desc,onDelete:Re(L)})]})}};return d.includes("read")||d.includes("read_detail")||d.includes("update")||d.includes("delete")?[].concat(r()(c.hmColumns||c.columns||[]),[S]):c.hmColumns},[d,v,P,se,Re,F,c.columns,c.hmColumns,fe.pathname]);return(0,f.jsx)("div",{className:"",children:(0,f.jsx)(_,o()(o()({rowKey:"id"},c),{},{scroll:ee(Ie),actionRef:Q,toolBarRender:function(){return[].concat(r()(c.toolBarRender?c.toolBarRender.apply(c,arguments):[]),[d.includes("create")&&(0,f.jsx)(ae,o()({onSuccess:F,trigger:h||(0,f.jsx)(oe.ZP,{type:"primary",children:"\u65B0\u5EFA"}),action:"create"},se))])},search:o()({layout:"vertical",defaultCollapsed:!1},c.search),hmColumns:Ie}))})}),he=e(66850),me=e(28026),w=e.n(me),ge=["hmItems","items"];function De(n){var t=n.hmItems,u=n.items,d=M()(n,ge),c=(0,D.useMemo)(function(){return t?t.map(function(h){var v=h.children;return h.children!==null&&h.children!==void 0&&(h.valueType==="date"?v=w()(v).format("YYYY-MM-DD"):h.valueType==="dateTime"?v=w()(v).format("YYYY-MM-DD HH:mm:ss"):h.valueType==="time"&&(v=w()(v).format("HH:mm:ss"))),o()(o()({},h),{},{children:v||"-"})}):u},[t,u]);return(0,f.jsx)(he.Z,o()({items:c},d))}var A=e(34019),xe=e(65273),Te=e(59590),Ee=e(32479),Ce={width:"100%",height:"100%"};function Pe(n){var t=n.value,u=n.onChange,d=n.readonly;return(0,f.jsx)(A.ZP,{style:Ce,mode:"javascript",theme:"monokai",value:t,onChange:u,readOnly:d,name:"javascript_editor",editorProps:{$blockScrolling:!0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})}var m=e(26494);function g(n){var t=n.value,u=n.onChange,d=n.readonly,c=(0,D.useRef)(null),h=(0,D.useRef)(null),v=(0,D.useRef)(u);return(0,D.useEffect)(function(){var P;(P=h.current)===null||P===void 0||P.update({text:t||""})},[t]),(0,D.useEffect)(function(){h.current=new m.q9({target:c.current,props:{mode:m.AR.text,readOnly:d,content:{text:t||""},onChange:function($){v.current($.text)}}})},[]),(0,f.jsx)("div",{ref:c,className:"h-full w-full"})}var T=e(70876),i=e(51709),E=["children","className","node"];function J(n){var t=n.value;return(0,f.jsx)(T.U,{unwrapDisallowed:!0,components:{code:function(d){var c=d.children,h=d.className,v=d.node,P=M()(d,E),$=/language-(\w+)/.exec(h||"");return $?(0,f.jsx)(i.Z,o()(o()({},P),{},{PreTag:"div",wrapLongLines:!0,children:String(c).replace(/\n$/,""),language:$[1].toLowerCase()})):(0,f.jsx)("code",o()(o()({},P),{},{className:h,children:c}))}},children:t||""})}var G=e(55860),b=e(12592);function ue(n){var t=n.value,u=n.onChange,d=function(v){return u==null||u(v),!1},c=function(){u==null||u(void 0)};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(b.Z,{name:"file",maxCount:1,showUploadList:!0,fileList:t?[t]:void 0,beforeUpload:d,onRemove:c,children:(0,f.jsx)(oe.ZP,{icon:(0,f.jsx)(G.Z,{}),children:"\u70B9\u51FB\u9009\u62E9\u6587\u4EF6"})})})}var $e=e(91880),Le=["value","onChange"];function Se(n){var t=n.value,u=n.onChange,d=M()(n,Le);return(0,f.jsx)($e.Z,o()(o()({},d),{},{value:!!t,onChange:function(h){return u==null?void 0:u(Number(h))}}))}var Me=e(64934),Ne=e(65124),Ke=function(t){return function(u,d,c){var h=(0,Ne.mW)(t);return h(u,d,c)}},Be=Ke,We=function(t){return t?(0,Me.Ue)()(Be(t)):function(u){return(0,Me.Ue)()(Be(u))}},be=e(82092),Ae=e.n(be),Ge=e(85003),He=e(83873);function Fe(n){return(0,He.Z)(n)&&/^\d+$/.test(n)?w()(parseInt(n)):w()(n)}var ve=function(n){return n.CustomDateTimeAndDateRange="CustomDateTimeAndDateRange",n.CustomDateAndDateRange="CustomDateAndDateRange",n}(ve||{}),Oe={dateTime:function(t){return t?(0,f.jsx)("div",{children:Fe(t).format("YYYY-MM-DD HH:mm:ss")}):(0,f.jsx)("div",{children:"-"})},date:function(t){return t?(0,f.jsx)("div",{children:Fe(t).format("YYYY-MM-DD")}):(0,f.jsx)("div",{children:"-"})}},je={dateRange:function(t,u){return(0,f.jsx)(Ge.Z,o()(o()({},u),{},{fieldProps:o()(o()({},u.fieldProps),{},{onChange:function(c){var h,v,P=c&&[w()(c[0]).startOf("day"),w()(c[1]).endOf("day")];(h=(v=u.fieldProps).onChange)===null||h===void 0||h.call(v,P)}})}))}},Ze=Ae()(Ae()({},ve.CustomDateTimeAndDateRange,{render:Oe.dateTime,renderFormItem:je.dateRange}),ve.CustomDateAndDateRange,{render:Oe.date,renderFormItem:je.dateRange})},63537:function(U,l,e){e.r(l),e.d(l,{texts:function(){return r}});var B=e(39278);const r=[{value:`// commitlint.config.js
module.exports = { extends: ['@huomu/commit-lint'] };
`,paraId:0,tocIndex:0}]},33517:function(U,l,e){e.r(l),e.d(l,{texts:function(){return r}});var B=e(76517);const r=[{value:"\u9700\u8981\u975E\u5E38\u4E86\u89E3 ant pro-components ProForm ProTable",paraId:0,tocIndex:0},{value:"\u57FA\u4E8E ant pro-components \u901A\u7528\u7684 CURD \u7EC4\u4EF6\uFF0C\u540C\u65F6\u4FDD\u7559\u6269\u5C55\u6027\u3002",paraId:1,tocIndex:0},{value:"\u8C03\u6574 actions \u4E3A ",paraId:2,tocIndex:3},{value:"['read_detail']",paraId:2,tocIndex:3},{value:"\uFF0C\u70B9\u51FB<\u67E5\u770B>\u8DF3\u8F6C\u5230 ",paraId:2,tocIndex:3},{value:"xxx/detail/[id]",paraId:2,tocIndex:3},{value:"\uFF0C",paraId:2,tocIndex:3},{value:"\u83B7\u53D6 ProTable \u7684 actionRef",paraId:3,tocIndex:5},{value:"\u901A\u8FC7 ref \u4F60\u53EF\u4EE5\u505A\u66F4\u591A\u64CD\u4F5C",paraId:4,tocIndex:6},{value:`import type { ReactNode } from 'react';
import type { HMTableProps } from '../table';
import type { ProFormInstance, ActionType } from '@ant-design/pro-components';

/**
 * create \u521B\u5EFA
 * read \u67E5\u770B
 * read_detail \u8BE6\u60C5\u9875\u67E5\u770B
 * update \u7F16\u8F91
 * delete \u5220\u9664
 */
type CurdAction = 'create' | 'read' | 'read_detail' | 'update' | 'delete';

interface CURDProps {
  actions: CurdAction[];

  /** \u8868\u683C\u76F8\u5173 */
  hmTableProps: HMTableProps;

  /** \u5220\u9664\u76F8\u5173 */
  deleteProps?: {
    /** \u663E\u793A\u540D\u79F0\u7D22\u5F15 */
    nameIndex: string;
    /** \u5220\u9664\u63A5\u53E3 */
    deleteById?: ({ id, ids }) => Promise<any>;
    deleteByRecord?: (record) => Promise<any>;
    desc?: string;
  };

  /** \u65B0\u5EFA\u6309\u94AE\uFF0C\u9ED8\u8BA4\u65B0\u5EFA */
  createButton?: ReactNode;

  /** \u5F39\u7A97\u8868\u5355 */
  detailForm?: (formProps: { readonly: boolean }, info: { action: CurdAction }) => ReactNode;
  /** detailForm \u7684 formRef */
  detailFormInstance?: ProFormInstance;

  /** \u65B0\u589E\u63A5\u53E3 */
  requestAdd?: (values) => Promise<any>;
  /** \u66F4\u65B0\u63A5\u53E3 */
  requestUpdateById?: (values) => Promise<any>;

  /** \u83B7\u53D6\u8BE6\u60C5\u63A5\u53E3 */
  requestGetById?: ({ id }) => Promise<any>;
  /** \u83B7\u53D6\u8BE6\u60C5\u63A5\u53E3\uFF0C\u975E id \u7684\u65F6\u5019 */
  requestGetByRecord?: (record) => Promise<any>;

  /** \u8DF3\u8F6C\u5230\u8BE6\u60C5\u7684 id \u6240\u4EE5\uFF0C\u9ED8\u8BA4 id */
  detailIdIndex?: string;
}

interface CURDMethods {
  getActionRef: () => React.MutableRefObject<ActionType | undefined>;
}
`,paraId:5,tocIndex:7}]},81541:function(U,l,e){e.r(l),e.d(l,{texts:function(){return r}});var B=e(63207);const r=[{value:"\u81EA\u5B9A\u4E49 valueType",paraId:0,tocIndex:0},{value:`import { customValueTypeMap } from '@huomu/core';
import { ProConfigProvider } from '@ant-design/pro-components';

const Demo = () => (
  <ProConfigProvider valueTypeMap={customValueTypeMap}>
    <div>some</div>
  </ProConfigProvider>
);

export default Demo;
`,paraId:1,tocIndex:1},{value:`enum CustomValueTypeEnum {
  /** \u6E32\u67D3\u65F6\u95F4 + \u641C\u7D22\u65E5\u671F\u8303\u56F4 */
  CustomDateTimeAndDateRange = 'CustomDateTimeAndDateRange',
  /** \u6E32\u67D3\u65E5\u671F + \u641C\u7D22\u65E5\u671F\u8303\u56F4 */
  CustomDateAndDateRange = 'CustomDateAndDateRange',
}
`,paraId:2,tocIndex:2}]},73755:function(U,l,e){e.r(l),e.d(l,{texts:function(){return r}});var B=e(43797);const r=[{value:`// .eslintrc.js
module.exports = {
  extends: ['@huomu/eslint-config-base'],
};
`,paraId:0,tocIndex:0}]},50256:function(U,l,e){e.r(l),e.d(l,{texts:function(){return r}});var B=e(8074);const r=[{value:`Usage: index [options] [command]

Options:
  -V, --version         output the version number
  -h, --help            display help for command

Commands:
  build_api [options]   swagger \u6587\u6863\u751F\u6210 API \u65B9\u6CD5
  build_enum [options]  \u6839\u636E\u679A\u4E3E\u751F\u6210\u4EE3\u7801
  help [command]        display help for command
`,paraId:0,tocIndex:0}]},18905:function(U,l,e){e.r(l),e.d(l,{texts:function(){return r}});var B=e(93112);const r=[{value:`// .stylelintrc.js
module.exports = {
  extends: ['@huomu/style-lint'],
};
`,paraId:0,tocIndex:0}]},31725:function(U,l){l.Z=`import React, { useRef } from 'react';
import type { CURDProps } from '@huomu/core';
import { CURD } from '@huomu/core';
import { Button } from 'antd';
import { ProForm, ProFormSwitch, ProFormText } from '@ant-design/pro-components';
import {
  fakeRequest,
  fakeDeleteById,
  fakeAdd,
  fakeGetById,
  fakeUpdateById,
  fakeRequestCity,
  fakeRequestArea,
  levels,
  fakeRequestSchool,
} from './data';

const Normal = () => {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57(\u7701\u7565)',
      dataIndex: 'name',
      search: true,
      ellipsis: true,
    },
    {
      title: 'city',
      dataIndex: 'city',
    },
    {
      title: 'area',
      dataIndex: 'area',
    },
  ];

  return (
    <CURD
      actions={['create', 'read', 'delete', 'update']}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
      deleteProps={{
        nameIndex: 'name',
        deleteById: fakeDeleteById,
      }}
      detailForm={(formProps) => (
        <>
          <ProFormText
            {...formProps}
            name="name"
            label="\u540D\u5B57"
            required
            rules={[{ required: true }]}
          />
        </>
      )}
      requestGetById={fakeGetById}
      requestAdd={fakeAdd}
      requestUpdateById={fakeUpdateById}
    />
  );
};

function ReadDetail() {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <CURD
      actions={['read_detail']}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
    />
  );
}

function Ref() {
  const formRef = useRef<any>();
  const [detailFormInstance] = ProForm.useForm();

  // @ts-ignore
  window._detailFormInstance = detailFormInstance;

  const name = ProForm.useWatch('name', formRef.current);
  const detailName = ProForm.useWatch('name', detailFormInstance);

  // \u4E0D\u77E5\u9053\u4E3A\u5565\u8FD9\u91CC name \u4E0D\u751F\u6548\uFF0C\u4F46\u662F\u9879\u76EE\u91CC\u662F\u751F\u6548\u7684\u3002\u5148\u5FFD\u7565
  console.log('useWatch', name, detailName);

  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <CURD
      actions={['create', 'read', 'update']}
      hmTableProps={{
        formRef,
        hmColumns,
        hmRequest: fakeRequest,
      }}
      detailFormInstance={detailFormInstance}
      detailForm={(formProps) => (
        <>
          <ProFormText
            {...formProps}
            name="name"
            label="\u540D\u5B57"
            required
            rules={[{ required: true }]}
            initialValue={'default'}
          />
          <ProFormSwitch {...formProps} name="status" label="\u5F00\u542F" initialValue={false} />
        </>
      )}
      requestGetById={fakeGetById}
      requestAdd={fakeAdd}
      requestUpdateById={fakeUpdateById}
    />
  );
}

function ActionRef() {
  const ref = useRef<any>();

  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <>
      <Button onClick={() => ref.current.getActionRef().current?.reload()}>reload</Button>
      <CURD
        ref={ref}
        actions={[]}
        hmTableProps={{
          hmColumns,
          hmRequest: fakeRequest,
        }}
      />
    </>
  );
}

function RemoteData() {
  const hmColumns: CURDProps['hmTableProps']['hmColumns'] = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
    {
      title: '\u7B49\u7EA7(\u672C\u5730\u6570\u636E)',
      dataIndex: 'level',
      search: true,
      valueEnum: levels,
    },
    {
      title: 'city(\u8FDC\u7AEF\u6570\u636E)',
      dataIndex: 'city',
      search: true,
      request: async () => {
        const res = await fakeRequestCity();

        return (
          res.map((item) => ({
            label: item,
            value: item,
          })) || []
        );
      },
    },
    {
      title: 'area(\u8054\u52A8 city)',
      dataIndex: 'area',
      search: true,
      request: async (params) => {
        console.log('params', params);
        const res = await fakeRequestArea(params);

        return (
          res.map((item) => ({
            label: item,
            value: item,
          })) || []
        );
      },
      dependencies: ['city'],
    },
    {
      title: '\u5B66\u6821(\u8FDC\u7AEF\u6570\u636E label value)',
      dataIndex: 'school',
      search: true,
      valueType: 'select',
      request: () => fakeRequestSchool(),
    },
  ];

  return (
    <CURD
      actions={[]}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
    />
  );
}

export { Normal, ReadDetail, Ref, ActionRef, RemoteData };
`}}]);
