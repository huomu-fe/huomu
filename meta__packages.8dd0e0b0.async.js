"use strict";(self.webpackChunkhuomu=self.webpackChunkhuomu||[]).push([[56],{2525:function(L,l,e){e.r(l),e.d(l,{demos:function(){return U}});var O=e(59496),r=e(95281),U={}},21434:function(L,l,e){e.r(l),e.d(l,{demos:function(){return C}});var O=e(90228),r=e.n(O),U=e(87999),o=e.n(U),x=e(59496),ne=e(5758),C={"curd-demo-0":{component:x.memo(x.lazy(o()(r()().mark(function R(){var p,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,55492));case 2:return p=a.sent,v=p.Normal,a.abrupt("return",{default:v});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-0",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { Normal } from './demo';

export default Normal;`},"./demo.tsx":{type:"FILE",value:e(32116).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(55492)},renderOpts:{compile:function(){var R=o()(r()().mark(function v(){var g,a=arguments;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.e(216).then(e.bind(e,20216));case 2:return d.abrupt("return",(g=d.sent).default.apply(g,a));case 3:case"end":return d.stop()}},v)}));function p(){return R.apply(this,arguments)}return p}()}},"curd-demo-1":{component:x.memo(x.lazy(o()(r()().mark(function R(){var p,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,55492));case 2:return p=a.sent,v=p.RemoteData,a.abrupt("return",{default:v});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-1",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { RemoteData } from './demo';

export default RemoteData;`},"./demo.tsx":{type:"FILE",value:e(32116).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(55492)},renderOpts:{compile:function(){var R=o()(r()().mark(function v(){var g,a=arguments;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.e(216).then(e.bind(e,20216));case 2:return d.abrupt("return",(g=d.sent).default.apply(g,a));case 3:case"end":return d.stop()}},v)}));function p(){return R.apply(this,arguments)}return p}()}},"curd-demo-2":{component:x.memo(x.lazy(o()(r()().mark(function R(){var p,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,55492));case 2:return p=a.sent,v=p.ReadDetail,a.abrupt("return",{default:v});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-2",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ReadDetail } from './demo';

export default ReadDetail;`},"./demo.tsx":{type:"FILE",value:e(32116).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(55492)},renderOpts:{compile:function(){var R=o()(r()().mark(function v(){var g,a=arguments;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.e(216).then(e.bind(e,20216));case 2:return d.abrupt("return",(g=d.sent).default.apply(g,a));case 3:case"end":return d.stop()}},v)}));function p(){return R.apply(this,arguments)}return p}()}},"curd-demo-3":{component:x.memo(x.lazy(o()(r()().mark(function R(){var p,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,55492));case 2:return p=a.sent,v=p.ReadDetail,a.abrupt("return",{default:v});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-3",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ReadDetail } from './demo';

export default ReadDetail;`},"./demo.tsx":{type:"FILE",value:e(32116).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(55492)},renderOpts:{compile:function(){var R=o()(r()().mark(function v(){var g,a=arguments;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.e(216).then(e.bind(e,20216));case 2:return d.abrupt("return",(g=d.sent).default.apply(g,a));case 3:case"end":return d.stop()}},v)}));function p(){return R.apply(this,arguments)}return p}()}},"curd-demo-4":{component:x.memo(x.lazy(o()(r()().mark(function R(){var p,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(e.bind(e,55492));case 2:return p=a.sent,v=p.ActionRef,a.abrupt("return",{default:v});case 5:case"end":return a.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-4",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ActionRef } from './demo';

export default ActionRef;`},"./demo.tsx":{type:"FILE",value:e(32116).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(55492)},renderOpts:{compile:function(){var R=o()(r()().mark(function v(){var g,a=arguments;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.e(216).then(e.bind(e,20216));case 2:return d.abrupt("return",(g=d.sent).default.apply(g,a));case 3:case"end":return d.stop()}},v)}));function p(){return R.apply(this,arguments)}return p}()}}}},17636:function(L,l,e){e.r(l),e.d(l,{demos:function(){return C}});var O=e(90228),r=e.n(O),U=e(87999),o=e.n(U),x=e(59496),ne=e(71492),C={"value_type_map-demo-0":{component:x.memo(x.lazy(o()(r()().mark(function R(){var p,v,g,a,E,d,K,k,y,q,te,F,G,Y;return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return F=function(){return F=o()(r()().mark(function J(){var re;return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return re=k(5).map(function(ee){return{id:"".concat(ee),timeStr:"2024-10-01 10:00:00",timeNumber:+q("2024-10-01 10:00:00"),dateStr:"2024-10-01",dateNumber:+q("2024-10-01")}}),Q.abrupt("return",Promise.resolve({data:{data:re,success:!0,totalSize:100}}));case 2:case"end":return Q.stop()}},J)})),F.apply(this,arguments)},te=function(){return F.apply(this,arguments)},M.next=4,Promise.resolve().then(e.bind(e,80349));case 4:return p=M.sent,v=p.CURD,g=p.customValueTypeMap,a=p.CustomValueTypeEnum,M.next=10,Promise.resolve().then(e.bind(e,60714));case 10:return E=M.sent,d=E.ProConfigProvider,M.next=14,Promise.resolve().then(e.bind(e,15337));case 14:return K=M.sent,k=K.range,M.next=18,Promise.resolve().then(e.t.bind(e,28026,23));case 18:return y=M.sent,q=y.default,G=function(){var J=[{title:"id",dataIndex:"id"},{title:"\u65F6\u95F4 str",dataIndex:"timeStr",valueType:a.CustomDateTimeAndDateRange,search:!0},{title:"\u65F6\u95F4 number",dataIndex:"timeNumber",valueType:a.CustomDateTimeAndDateRange,search:!0},{title:"\u65E5\u671F str",dataIndex:"dateStr",valueType:a.CustomDateAndDateRange,search:!0},{title:"\u65E5\u671F number",dataIndex:"dateNumber",valueType:a.CustomDateAndDateRange,search:!0}];return x.createElement(v,{actions:[],hmTableProps:{hmColumns:J,hmRequest:te}})},Y=function(){return x.createElement(d,{valueTypeMap:g},x.createElement(G,null))},M.abrupt("return",{default:Y});case 23:case"end":return M.stop()}},R)})))),asset:{type:"BLOCK",id:"value_type_map-demo-0",refAtomIds:["value_type_map"],dependencies:{"index.tsx":{type:"FILE",value:`import { CURD, customValueTypeMap, CustomValueTypeEnum } from '@huomu/core';
import { ProConfigProvider } from '@ant-design/pro-components';
import { range } from 'lodash-es';
import dayjs from 'dayjs';

async function fakeHMRequest() {
  const data = range(5).map((item) => ({
    id: \`\${item}\`,
    timeStr: \`2024-10-01 10:00:00\`,
    timeNumber: +dayjs('2024-10-01 10:00:00'),
    dateStr: \`2024-10-01\`,
    dateNumber: +dayjs('2024-10-01'),
  }));

  return Promise.resolve({
    data: {
      data,
      success: true,
      totalSize: 100,
    },
  }) as Promise<any>;
}

const Table = () => {
  const hmColumns: any[] = [
    {
      title: 'id',
      dataIndex: 'id',
    },
    {
      title: '\u65F6\u95F4 str',
      dataIndex: 'timeStr',
      valueType: CustomValueTypeEnum.CustomDateTimeAndDateRange,
      search: true,
    },
    {
      title: '\u65F6\u95F4 number',
      dataIndex: 'timeNumber',
      valueType: CustomValueTypeEnum.CustomDateTimeAndDateRange,
      search: true,
    },
    {
      title: '\u65E5\u671F str',
      dataIndex: 'dateStr',
      valueType: CustomValueTypeEnum.CustomDateAndDateRange,
      search: true,
    },
    {
      title: '\u65E5\u671F number',
      dataIndex: 'dateNumber',
      valueType: CustomValueTypeEnum.CustomDateAndDateRange,
      search: true,
    },
  ];

  return (
    <CURD
      actions={[]}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeHMRequest,
      }}
    />
  );
};

const Demo = () => (
  <ProConfigProvider valueTypeMap={customValueTypeMap}>
    <Table />
  </ProConfigProvider>
);

export default Demo;`},"@huomu/core":{type:"NPM",value:"1.3.2"},"@ant-design/pro-components":{type:"NPM",value:"2.7.15"},"lodash-es":{type:"NPM",value:"4.17.21"},dayjs:{type:"NPM",value:"1.11.12"}},entry:"index.tsx"},context:{"@huomu/core":e(80349),"@ant-design/pro-components":e(60714),"lodash-es":e(15337),dayjs:e(28026)},renderOpts:{compile:function(){var R=o()(r()().mark(function v(){var g,a=arguments;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.e(216).then(e.bind(e,20216));case 2:return d.abrupt("return",(g=d.sent).default.apply(g,a));case 3:case"end":return d.stop()}},v)}));function p(){return R.apply(this,arguments)}return p}()}}}},94815:function(L,l,e){e.r(l),e.d(l,{demos:function(){return U}});var O=e(59496),r=e(54392),U={}},61035:function(L,l,e){e.r(l),e.d(l,{demos:function(){return U}});var O=e(59496),r=e(26880),U={}},96700:function(L,l,e){e.r(l),e.d(l,{demos:function(){return U}});var O=e(59496),r=e(16606),U={}},55492:function(L,l,e){e.r(l),e.d(l,{ActionRef:function(){return Re},Normal:function(){return pe},ReadDetail:function(){return V},Ref:function(){return ye},RemoteData:function(){return ge}});var O=e(90228),r=e.n(O),U=e(87999),o=e.n(U),x=e(48305),ne=e.n(x),C=e(26068),R=e.n(C),p=e(59496),v=e(80349),g=e(21941),a=e(68908),E=e(53992),d=e(62802),K={\u5E7F\u5DDE:["\u767D\u4E91","\u9EC4\u57D4","\u589E\u57CE"],\u6DF1\u5733:["\u798F\u7530","\u5357\u5C71","\u5B9D\u5B89"]};function k(m){return Math.floor(Math.random()*m)}function y(){return Object.keys(K)[k(Object.keys(K).length+1)]}function q(m){if(m.city)return m.city&&K[m.city][k(K[m.city].length+1)]}function te(m){return(0,d.Z)(m).map(function(I){var B=y(),i=q({city:B});return{id:"".concat(I),name:"name-".concat(I),city:B,area:i}})}var F=te(100);function G(m){return Y.apply(this,arguments)}function Y(){return Y=o()(r()().mark(function m(I){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMRequest",I),i.abrupt("return",new Promise(function(T){setTimeout(function(){T({data:{data:F,success:!0,totalSize:F.length}})},1e3)}));case 2:case"end":return i.stop()}},m)})),Y.apply(this,arguments)}function le(m){return M.apply(this,arguments)}function M(){return M=o()(r()().mark(function m(I){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMDeleteById",I),F=F.filter(function(T){return T.id!==I.id}),i.abrupt("return",Promise.resolve({}));case 3:case"end":return i.stop()}},m)})),M.apply(this,arguments)}function w(m){return J.apply(this,arguments)}function J(){return J=o()(r()().mark(function m(I){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMGetById",I),i.abrupt("return",new Promise(function(T){setTimeout(function(){T({data:{data:F.find(function(z){return z.id===I.id})}})},1e3)}));case 2:case"end":return i.stop()}},m)})),J.apply(this,arguments)}function re(m){return _.apply(this,arguments)}function _(){return _=o()(r()().mark(function m(I){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMAdd",I),F.push(R()({id:F.length+1},I)),i.abrupt("return",Promise.resolve({}));case 3:case"end":return i.stop()}},m)})),_.apply(this,arguments)}function Q(m){return ee.apply(this,arguments)}function ee(){return ee=o()(r()().mark(function m(I){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("fakeHMUpdateById",I),F=F.map(function(T){return T.id===I.id?R()(R()({},T),I):T}),i.abrupt("return",Promise.resolve({}));case 3:case"end":return i.stop()}},m)})),ee.apply(this,arguments)}function ae(){return Promise.resolve(Object.keys(K))}function ve(m){return m!=null&&m.city?Promise.resolve(K[m.city]):Promise.resolve(Object.values(K).reduce(function(I,B){return I.concat(B)},[]))}var j=e(4637),pe=function(){var I=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0},{title:"city",dataIndex:"city"},{title:"area",dataIndex:"area"}];return(0,j.jsx)(v.CURD,{actions:["create","read","delete","update"],hmTableProps:{hmColumns:I,hmRequest:G},deleteProps:{nameIndex:"name",deleteById:le},detailForm:function(i){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(a.Z,R()(R()({},i),{},{name:"name",label:"\u540D\u5B57",required:!0,rules:[{required:!0}]}))})},requestGetById:w,requestAdd:re,requestUpdateById:Q})};function V(){var m=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,j.jsx)(v.CURD,{actions:["read_detail"],hmTableProps:{hmColumns:m,hmRequest:G}})}function ye(){var m=(0,p.useRef)(),I=E.A.useForm(),B=ne()(I,1),i=B[0],T=E.A.useWatch("name",m.current),z=E.A.useWatch("name",i);console.log("name",T,"detailName",z);var H=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,j.jsx)(v.CURD,{actions:["create","read_detail"],hmTableProps:{formRef:m,hmColumns:H,hmRequest:G},detailFormInstance:i,detailForm:function(ue){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(a.Z,R()(R()({},ue),{},{name:"name",label:"\u540D\u5B57",required:!0,rules:[{required:!0}]}))})}})}function Re(){var m=(0,p.useRef)(),I=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.ZP,{onClick:function(){var i;return(i=m.current.getActionRef().current)===null||i===void 0?void 0:i.reload()},children:"reload"}),(0,j.jsx)(v.CURD,{ref:m,actions:[],hmTableProps:{hmColumns:I,hmRequest:G}})]})}function ge(){var m=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0},{title:"city",dataIndex:"city",search:!0,request:function(){var I=o()(r()().mark(function i(){var T;return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,ae();case 2:return T=H.sent,H.abrupt("return",T.map(function(W){return{label:W,value:W}})||[]);case 4:case"end":return H.stop()}},i)}));function B(){return I.apply(this,arguments)}return B}()},{title:"area",dataIndex:"area",search:!0,request:function(){var I=o()(r()().mark(function i(T){var z;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return console.log("params",T),W.next=3,ve(T);case 3:return z=W.sent,W.abrupt("return",z.map(function(ue){return{label:ue,value:ue}})||[]);case 5:case"end":return W.stop()}},i)}));function B(i){return I.apply(this,arguments)}return B}(),dependencies:["city"]}];return(0,j.jsx)(v.CURD,{actions:[],hmTableProps:{hmColumns:m,hmRequest:G}})}},80349:function(L,l,e){e.r(l),e.d(l,{CURD:function(){return ve},CURDDetail:function(){return ae},CustomValueTypeEnum:function(){return ie},EditorJSON:function(){return H},EditorJavascript:function(){return T},EditorMarkdown:function(){return Ee},FileUpload:function(){return Ae},HMDescriptions:function(){return Re},HMTable:function(){return G},NumberSwitch:function(){return je},OperateDelete:function(){return w},createStore:function(){return Le},customValueTypeMap:function(){return Ge},getTableScroll:function(){return Y},useDelete:function(){return M}});var O=e(15558),r=e.n(O),U=e(26068),o=e.n(U),x=e(73197),ne=e(21941),C=e(59496),R=e(5791),p=e(33553),v=e(90228),g=e.n(v),a=e(67825),E=e.n(a),d=e(87999),K=e.n(d),k=e(19525),y=e(4637),q=["current","pageSize"],te=["hmRequest","request","hmColumns","columns","rowKey"];function F(n){return function(){var t=K()(g()().mark(function u(s){var c,f,h,D;return g()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return c=s.current,f=s.pageSize,h=E()(s,q),$.next=3,n(o()({page:c,pageSize:f},h));case 3:return D=$.sent,$.abrupt("return",{data:D.data.data,success:D.data.success,total:D.data.totalSize});case 5:case"end":return $.stop()}},u)}));return function(u){return t.apply(this,arguments)}}()}function G(n){var t=n.hmRequest,u=n.request,s=n.hmColumns,c=n.columns,f=n.rowKey,h=f===void 0?"id":f,D=E()(n,te),N=(0,C.useCallback)(function(Z){return t?F(t)(Z):u(Z,{},{})},[t,u]),$=(0,C.useMemo)(function(){return s?s.map(function(Z){return o()({search:!1},Z)}):c},[c,s]);return(0,y.jsx)(k.Z,o()({cardBordered:!0,rowKey:h,pagination:o()({showSizeChanger:!0,showQuickJumper:!0},D.pagination),options:!1,request:N,columns:$},D))}function Y(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:120,u={x:0,y:void 0};return n==null||n.forEach(function(s){s.hideInTable||(u.x+=Number(s.width)||t)}),u}var le=e(90037);function M(n){var t=n.name,u=n.desc,s=n.onDelete,c=(0,C.useCallback)(function(){le.Z.confirm({title:"\u786E\u8BA4\u5220\u9664 \u201C".concat(t,"\u201D \u5417\uFF1F"),content:u||"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){s()}})},[t,u,s]);return{doDelete:c}}function w(n){var t=n.name,u=n.desc,s=n.onDelete,c=(0,C.useCallback)(function(){le.Z.confirm({title:"\u786E\u8BA4\u5220\u9664 \u201C".concat(t,"\u201D \u5417\uFF1F"),content:u||"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){s()}})},[t,u,s]);return(0,y.jsx)("a",{style:{color:"red"},onClick:c,children:"\u5220\u9664"})}var J=e(48305),re=e.n(J),_=e(75379),Q=e(53992),ee=e(33417);function ae(n){var t=n.action,u=n.id,s=n.record,c=n.trigger,f=n.onSuccess,h=n.detailForm,D=n.requestGetById,N=n.requestGetByRecord,$=n.requestAdd,Z=n.requestUpdateById,me=n.detailFormInstance,ce=(0,C.useRef)(""+Math.random()),fe=Q.A.useForm(me),X=re()(fe,1),S=X[0],oe=(0,C.useCallback)(function(){var se=K()(g()().mark(function A(b){return g()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(P.prev=0,!(t==="create"&&$)){P.next=5;break}return P.next=4,$(b);case 4:_.ZP.open({type:"success",content:"\u521B\u5EFA\u6210\u529F"});case 5:if(!(t==="update"&&Z)){P.next=9;break}return P.next=8,Z(o()(o()({},b),{},{id:u}));case 8:_.ZP.open({type:"success",content:"\u66F4\u65B0\u6210\u529F"});case 9:return f==null||f(),P.abrupt("return",!0);case 13:P.prev=13,P.t0=P.catch(0),setTimeout(function(){throw P.t0},10);case 16:case"end":return P.stop()}},A,null,[[0,13]])}));return function(A){return se.apply(this,arguments)}}(),[t,f,$,Z,u]),he=(0,C.useCallback)(function(se){if(se&&(S==null||S.resetFields(),u)){if(D)return D({id:u}).then(function(A){S==null||S.setFieldsValue(A.data.data)});if(N)return N(s).then(function(A){S==null||S.setFieldsValue(A.data.data)})}},[S,u,D,N,s]),de=(0,C.useMemo)(function(){return h?h({readonly:t==="read"&&!!u},{action:t}):null},[t,u,h]);return(0,y.jsxs)(ee.a,{form:S,trigger:c,autoFocusFirstInput:!0,onFinish:oe,onOpenChange:he,layout:"vertical",readonly:t==="read"&&!!u,children:[(0,y.jsx)("div",{className:"h-[20px]"}),de]},u||ce.current)}var ve=(0,C.forwardRef)(function(t,u){var s=t.actions,c=t.hmTableProps,f=t.createButton,h=t.deleteProps,D=t.detailIdIndex,N=t.detailForm,$=t.requestGetById,Z=t.requestGetByRecord,me=t.requestAdd,ce=t.requestUpdateById,fe=t.detailFormInstance,X=(0,C.useRef)(),S=(0,R.TH)();(0,C.useImperativeHandle)(u,function(){return{getActionRef:function(){return X}}},[X]);var oe=(0,C.useMemo)(function(){return{detailForm:N,requestGetById:$,requestGetByRecord:Z,requestAdd:me,requestUpdateById:ce,detailFormInstance:fe}},[N,me,$,Z,ce,fe]),he=(0,C.useCallback)(function(A){return function(){if(h!=null&&h.deleteById)return h.deleteById({id:A.id,ids:[A.id]}).then(function(){var b;(b=X.current)===null||b===void 0||b.reload()});if(h!=null&&h.deleteByRecord)return h.deleteByRecord(A).then(function(){var b;(b=X.current)===null||b===void 0||b.reload()});throw new Error("\u6CA1\u6709\u4F20 deleteById or deleteByRecord")}},[h]),de=(0,C.useCallback)(function(){var A;(A=X.current)===null||A===void 0||A.reload()},[]),se=(0,C.useMemo)(function(){var A={title:"\u64CD\u4F5C",fixed:"right",width:120,render:function(He,P){return(0,y.jsxs)(x.Z,{children:[s.includes("read")&&(0,y.jsx)(ae,o()({id:P.id,record:P,onSuccess:de,trigger:(0,y.jsx)("a",{children:"\u67E5\u770B"}),action:"read"},oe),"read"+P.id),s.includes("read_detail")&&(0,y.jsx)(p.rU,{to:"".concat(S.pathname,"/detail/").concat(P[D||"id"]),children:"\u67E5\u770B"}),s.includes("update")&&(0,y.jsx)(ae,o()({id:P.id,record:P,onSuccess:de,trigger:(0,y.jsx)("a",{children:"\u7F16\u8F91"}),action:"update"},oe),"update"+P.id),s.includes("delete")&&h&&(0,y.jsx)(w,{name:P[h.nameIndex],desc:h.desc,onDelete:he(P)})]})}};return s.includes("read")||s.includes("read_detail")||s.includes("update")||s.includes("delete")?[].concat(r()(c.hmColumns||c.columns||[]),[A]):c.hmColumns},[s,h,D,oe,he,de,c.columns,c.hmColumns,S.pathname]);return(0,y.jsx)("div",{className:"",children:(0,y.jsx)(G,o()(o()({rowKey:"id"},c),{},{scroll:Y(se),actionRef:X,toolBarRender:function(){return[].concat(r()(c.toolBarRender?c.toolBarRender.apply(c,arguments):[]),[s.includes("create")&&(0,y.jsx)(ae,o()({onSuccess:de,trigger:f||(0,y.jsx)(ne.ZP,{type:"primary",children:"\u65B0\u5EFA"}),action:"create"},oe),"create")])},search:o()({layout:"vertical",defaultCollapsed:!1},c.search),hmColumns:se}))})}),j=e(66850),pe=e(28026),V=e.n(pe),ye=["hmItems","items"];function Re(n){var t=n.hmItems,u=n.items,s=E()(n,ye),c=(0,C.useMemo)(function(){return t?t.map(function(f){var h=f.children;return f.children!==null&&f.children!==void 0&&(f.valueType==="date"?h=V()(h).format("YYYY-MM-DD"):f.valueType==="dateTime"?h=V()(h).format("YYYY-MM-DD HH:mm:ss"):f.valueType==="time"&&(h=V()(h).format("HH:mm:ss"))),o()(o()({},f),{},{children:h||"-"})}):u},[t,u]);return(0,y.jsx)(j.Z,o()({items:c},s))}var ge=e(34019),m=e(65273),I=e(59590),B=e(32479),i={width:"100%",height:"100%"};function T(n){var t=n.value,u=n.onChange,s=n.readonly;return(0,y.jsx)(ge.ZP,{style:i,mode:"javascript",theme:"monokai",value:t,onChange:u,readOnly:s,name:"javascript_editor",editorProps:{$blockScrolling:!0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})}var z=e(26494);function H(n){var t=n.value,u=n.onChange,s=n.readonly,c=(0,C.useRef)(null),f=(0,C.useRef)(null),h=(0,C.useRef)(u);return(0,C.useEffect)(function(){var D;(D=f.current)===null||D===void 0||D.update({text:t||""})},[t]),(0,C.useEffect)(function(){f.current=new z.q9({target:c.current,props:{mode:z.AR.text,readOnly:s,content:{text:t||""},onChange:function(N){h.current(N.text)}}})},[]),(0,y.jsx)("div",{ref:c,className:"h-full w-full"})}var W=e(70876),ue=e(51709),Te=["children","className","node"];function Ee(n){var t=n.value;return(0,y.jsx)(W.U,{unwrapDisallowed:!0,components:{code:function(s){var c=s.children,f=s.className,h=s.node,D=E()(s,Te),N=/language-(\w+)/.exec(f||"");return N?(0,y.jsx)(ue.Z,o()(o()({},D),{},{PreTag:"div",wrapLongLines:!0,children:String(c).replace(/\n$/,""),language:N[1].toLowerCase()})):(0,y.jsx)("code",o()(o()({},D),{},{className:f,children:c}))}},children:t||""})}var Me=e(55860),Be=e(12592);function Ae(n){var t=n.value,u=n.onChange,s=function(h){return u==null||u(h),!1},c=function(){u==null||u(void 0)};return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(Be.Z,{name:"file",maxCount:1,showUploadList:!0,fileList:t?[t]:void 0,beforeUpload:s,onRemove:c,children:(0,y.jsx)(ne.ZP,{icon:(0,y.jsx)(Me.Z,{}),children:"\u70B9\u51FB\u9009\u62E9\u6587\u4EF6"})})})}var Oe=e(91880),Fe=["value","onChange"];function je(n){var t=n.value,u=n.onChange,s=E()(n,Fe);return(0,y.jsx)(Oe.Z,o()(o()({},s),{},{value:!!t,onChange:function(f){return u==null?void 0:u(Number(f))}}))}var Ie=e(64934),Ue=e(65124),$e=function(t){return function(u,s,c){var f=(0,Ue.mW)(t);return f(u,s,c)}},Ce=$e,Le=function(t){return t?(0,Ie.Ue)()(Ce(t)):function(u){return(0,Ie.Ue)()(Ce(u))}},Ne=e(82092),De=e.n(Ne),Se=e(85003),Ke=e(83873);function We(n){return(0,Ke.Z)(n)&&/^\d+$/.test(n)?V()(parseInt(n)):V()(n)}var ie=function(n){return n.CustomDateTimeAndDateRange="CustomDateTimeAndDateRange",n.CustomDateAndDateRange="CustomDateAndDateRange",n}(ie||{}),Pe={dateTime:function(t){return t?(0,y.jsx)("div",{children:We(t).format("YYYY-MM-DD HH:mm:ss")}):"-"},date:function(t){return(0,y.jsx)("div",{children:t?V()(parseInt(t)).format("YYYY-MM-DD"):"-"})}},xe={dateRange:function(t,u){return(0,y.jsx)(Se.Z,o()(o()({},u),{},{fieldProps:o()(o()({},u.fieldProps),{},{onChange:function(c){var f,h,D=c&&[V()(c[0]).startOf("day"),V()(c[1]).endOf("day")];(f=(h=u.fieldProps).onChange)===null||f===void 0||f.call(h,D)}})}))}},Ge=De()(De()({},ie.CustomDateTimeAndDateRange,{render:Pe.dateTime,renderFormItem:xe.dateRange}),ie.CustomDateAndDateRange,{render:Pe.date,renderFormItem:xe.dateRange})},28145:function(L,l,e){e.r(l),e.d(l,{texts:function(){return r}});var O=e(95281);const r=[{value:`// commitlint.config.js
module.exports = { extends: ['@huomu/commit-lint'] };
`,paraId:0,tocIndex:0}]},49097:function(L,l,e){e.r(l),e.d(l,{texts:function(){return r}});var O=e(5758);const r=[{value:"\u9700\u8981\u975E\u5E38\u4E86\u89E3 ant pro-components ProForm ProTable",paraId:0,tocIndex:0},{value:"\u57FA\u4E8E ant pro-components \u901A\u7528\u7684 CURD \u7EC4\u4EF6\uFF0C\u540C\u65F6\u4FDD\u7559\u6269\u5C55\u6027\u3002",paraId:1,tocIndex:0},{value:"\u8C03\u6574 actions \u4E3A ",paraId:2,tocIndex:4},{value:"['read_detail']",paraId:2,tocIndex:4},{value:"\uFF0C\u70B9\u51FB<\u67E5\u770B>\u8DF3\u8F6C\u5230 ",paraId:2,tocIndex:4},{value:"xxx/detail/[id]",paraId:2,tocIndex:4},{value:"\uFF0C",paraId:2,tocIndex:4},{value:"\u83B7\u53D6 ProTable \u7684 actionRef",paraId:3,tocIndex:5},{value:"\u901A\u8FC7 ref \u4F60\u53EF\u4EE5\u505A\u66F4\u591A\u64CD\u4F5C",paraId:4,tocIndex:6},{value:`/**
 * create \u521B\u5EFA
 * read \u67E5\u770B
 * read_detail \u8BE6\u60C5\u9875\u67E5\u770B
 * update \u7F16\u8F91
 * delete \u5220\u9664
 */
type CurdAction = 'create' | 'read' | 'read_detail' | 'update' | 'delete';

interface CURDProps {
  actions: CurdAction[];

  /** \u8868\u683C\u76F8\u5173 */
  hmTableProps: HMTableProps;

  /** \u5220\u9664\u76F8\u5173 */
  deleteProps?: {
    /** \u663E\u793A\u540D\u79F0\u7D22\u5F15 */
    nameIndex: string;
    /** \u5220\u9664\u63A5\u53E3 */
    deleteById?: ({ id, ids }) => Promise<any>;
    deleteByRecord?: (record) => Promise<any>;
    desc?: string;
  };

  /** \u65B0\u5EFA\u6309\u94AE\uFF0C\u9ED8\u8BA4\u65B0\u5EFA */
  createButton?: ReactNode;

  /** \u5F39\u7A97\u8868\u5355 */
  detailForm?: (formProps: { readonly: boolean }, info: { action: CurdAction }) => ReactNode;
  /** detailForm \u7684 formRef */
  detailFormInstance?: ProFormInstance;

  /** \u65B0\u589E\u63A5\u53E3 */
  requestAdd?: (values) => Promise<any>;
  /** \u66F4\u65B0\u63A5\u53E3 */
  requestUpdateById?: (values) => Promise<any>;

  /** \u83B7\u53D6\u8BE6\u60C5\u63A5\u53E3 */
  requestGetById?: ({ id }) => Promise<any>;
  /** \u83B7\u53D6\u8BE6\u60C5\u63A5\u53E3\uFF0C\u975E id \u7684\u65F6\u5019 */
  requestGetByRecord?: (record) => Promise<any>;

  /** \u8DF3\u8F6C\u5230\u8BE6\u60C5\u7684 id \u6240\u4EE5\uFF0C\u9ED8\u8BA4 id */
  detailIdIndex?: string;
}

interface CURDMethods {
  getActionRef: () => React.MutableRefObject<ActionType | undefined>;
}
`,paraId:5,tocIndex:7}]},96147:function(L,l,e){e.r(l),e.d(l,{texts:function(){return r}});var O=e(71492);const r=[{value:"\u81EA\u5B9A\u4E49 valueType",paraId:0,tocIndex:0},{value:`import { customValueTypeMap } from '@huomu/core';
import { ProConfigProvider } from '@ant-design/pro-components';

const Demo = () => (
  <ProConfigProvider valueTypeMap={customValueTypeMap}>
    <div>some</div>
  </ProConfigProvider>
);

export default Demo;
`,paraId:1,tocIndex:1}]},73690:function(L,l,e){e.r(l),e.d(l,{texts:function(){return r}});var O=e(54392);const r=[{value:`// .eslintrc.js
module.exports = {
  extends: ['@huomu/eslint-config-base'],
};
`,paraId:0,tocIndex:0}]},61799:function(L,l,e){e.r(l),e.d(l,{texts:function(){return r}});var O=e(26880);const r=[{value:`Usage: index [options] [command]

Options:
  -V, --version         output the version number
  -h, --help            display help for command

Commands:
  build_api [options]   swagger \u6587\u6863\u751F\u6210 API \u65B9\u6CD5
  build_enum [options]  \u6839\u636E\u679A\u4E3E\u751F\u6210\u4EE3\u7801
  help [command]        display help for command
`,paraId:0,tocIndex:0}]},30226:function(L,l,e){e.r(l),e.d(l,{texts:function(){return r}});var O=e(16606);const r=[{value:`// .stylelintrc.js
module.exports = {
  extends: ['@huomu/style-lint'],
};
`,paraId:0,tocIndex:0}]},32116:function(L,l){l.Z=`import React, { useRef } from 'react';
import { CURD } from '@huomu/core';
import { Button } from 'antd';
import { ProForm, ProFormText } from '@ant-design/pro-components';
import {
  fakeRequest,
  fakeDeleteById,
  fakeAdd,
  fakeGetById,
  fakeUpdateById,
  fakeRequestCity,
  fakeRequestArea,
} from './data';

const Normal = () => {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
    {
      title: 'city',
      dataIndex: 'city',
    },
    {
      title: 'area',
      dataIndex: 'area',
    },
  ];

  return (
    <CURD
      actions={['create', 'read', 'delete', 'update']}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
      deleteProps={{
        nameIndex: 'name',
        deleteById: fakeDeleteById,
      }}
      detailForm={(formProps) => (
        <>
          <ProFormText
            {...formProps}
            name="name"
            label="\u540D\u5B57"
            required
            rules={[{ required: true }]}
          />
        </>
      )}
      requestGetById={fakeGetById}
      requestAdd={fakeAdd}
      requestUpdateById={fakeUpdateById}
    />
  );
};

function ReadDetail() {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <CURD
      actions={['read_detail']}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
    />
  );
}

function Ref() {
  const formRef = useRef<any>();
  const [detailFormInstance] = ProForm.useForm();

  const name = ProForm.useWatch('name', formRef.current);
  const detailName = ProForm.useWatch('name', detailFormInstance);

  console.log('name', name, 'detailName', detailName);
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <CURD
      actions={['create', 'read_detail']}
      hmTableProps={{
        formRef,
        hmColumns,
        hmRequest: fakeRequest,
      }}
      detailFormInstance={detailFormInstance}
      detailForm={(formProps) => (
        <>
          <ProFormText
            {...formProps}
            name="name"
            label="\u540D\u5B57"
            required
            rules={[{ required: true }]}
          />
        </>
      )}
    />
  );
}

function ActionRef() {
  const ref = useRef<any>();

  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <>
      <Button onClick={() => ref.current.getActionRef().current?.reload()}>reload</Button>
      <CURD
        ref={ref}
        actions={[]}
        hmTableProps={{
          hmColumns,
          hmRequest: fakeRequest,
        }}
      />
    </>
  );
}

function RemoteData() {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
    {
      title: 'city',
      dataIndex: 'city',
      search: true,
      request: async () => {
        const res = await fakeRequestCity();

        return (
          res.map((item) => ({
            label: item,
            value: item,
          })) || []
        );
      },
    },
    {
      title: 'area',
      dataIndex: 'area',
      search: true,
      request: async (params) => {
        console.log('params', params);
        const res = await fakeRequestArea(params);

        return (
          res.map((item) => ({
            label: item,
            value: item,
          })) || []
        );
      },
      dependencies: ['city'],
    },
  ];

  return (
    <CURD
      actions={[]}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
    />
  );
}

export { Normal, ReadDetail, Ref, ActionRef, RemoteData };
`}}]);
