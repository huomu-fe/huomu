"use strict";(self.webpackChunkhuomu=self.webpackChunkhuomu||[]).push([[56],{7353:function(j,d,e){e.r(d),e.d(d,{demos:function(){return O}});var x=e(59496),n=e(39278),O={}},79674:function(j,d,e){e.r(d),e.d(d,{demos:function(){return g}});var x=e(90228),n=e.n(x),O=e(87999),s=e.n(O),T=e(59496),J=e(76517),g={"curd-demo-0":{component:T.memo(T.lazy(s()(n()().mark(function R(){var v,f;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return v=r.sent,f=v.Normal,r.abrupt("return",{default:f});case 5:case"end":return r.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-0",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { Normal } from './demo';

export default Normal;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=s()(n()().mark(function f(){var I,r=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e.e(576).then(e.bind(e,47576));case 2:return u.abrupt("return",(I=u.sent).default.apply(I,r));case 3:case"end":return u.stop()}},f)}));function v(){return R.apply(this,arguments)}return v}()}},"curd-demo-1":{component:T.memo(T.lazy(s()(n()().mark(function R(){var v,f;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return v=r.sent,f=v.ReadDetail,r.abrupt("return",{default:f});case 5:case"end":return r.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-1",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ReadDetail } from './demo';

export default ReadDetail;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=s()(n()().mark(function f(){var I,r=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e.e(576).then(e.bind(e,47576));case 2:return u.abrupt("return",(I=u.sent).default.apply(I,r));case 3:case"end":return u.stop()}},f)}));function v(){return R.apply(this,arguments)}return v}()}},"curd-demo-2":{component:T.memo(T.lazy(s()(n()().mark(function R(){var v,f;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return v=r.sent,f=v.RemoteData,r.abrupt("return",{default:f});case 5:case"end":return r.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-2",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { RemoteData } from './demo';

export default RemoteData;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=s()(n()().mark(function f(){var I,r=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e.e(576).then(e.bind(e,47576));case 2:return u.abrupt("return",(I=u.sent).default.apply(I,r));case 3:case"end":return u.stop()}},f)}));function v(){return R.apply(this,arguments)}return v}()}},"curd-demo-3":{component:T.memo(T.lazy(s()(n()().mark(function R(){var v,f;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return v=r.sent,f=v.Ref,r.abrupt("return",{default:f});case 5:case"end":return r.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-3",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { Ref } from './demo';

export default Ref;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=s()(n()().mark(function f(){var I,r=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e.e(576).then(e.bind(e,47576));case 2:return u.abrupt("return",(I=u.sent).default.apply(I,r));case 3:case"end":return u.stop()}},f)}));function v(){return R.apply(this,arguments)}return v}()}},"curd-demo-4":{component:T.memo(T.lazy(s()(n()().mark(function R(){var v,f;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(e.bind(e,20321));case 2:return v=r.sent,f=v.ActionRef,r.abrupt("return",{default:f});case 5:case"end":return r.stop()}},R)})))),asset:{type:"BLOCK",id:"curd-demo-4",refAtomIds:["curd"],dependencies:{"index.tsx":{type:"FILE",value:`import { ActionRef } from './demo';

export default ActionRef;`},"./demo.tsx":{type:"FILE",value:e(31725).Z}},entry:"index.tsx"},context:{"./demo.tsx":e(20321)},renderOpts:{compile:function(){var R=s()(n()().mark(function f(){var I,r=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e.e(576).then(e.bind(e,47576));case 2:return u.abrupt("return",(I=u.sent).default.apply(I,r));case 3:case"end":return u.stop()}},f)}));function v(){return R.apply(this,arguments)}return v}()}}}},77723:function(j,d,e){e.r(d),e.d(d,{demos:function(){return v}});var x=e(90228),n=e.n(x),O=e(48305),s=e.n(O),T=e(87999),J=e.n(T),g=e(59496),R=e(76646),v={"editor_javascript-demo-0":{component:g.memo(g.lazy(J()(n()().mark(function f(){var I,r,P,u,H;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return H=function(){var b=r(""),V=s()(b,2),Q=V[0],X=V[1];return g.createElement("div",{style:{width:"500px",height:"500px"}},g.createElement(u,{value:Q,onChange:X}))},l.next=3,Promise.resolve().then(e.t.bind(e,59496,19));case 3:return I=l.sent,r=I.useState,l.next=7,Promise.resolve().then(e.bind(e,60967));case 7:return P=l.sent,u=P.EditorJavascript,l.abrupt("return",{default:H});case 10:case"end":return l.stop()}},f)})))),asset:{type:"BLOCK",id:"editor_javascript-demo-0",refAtomIds:["editor_javascript"],dependencies:{"index.tsx":{type:"FILE",value:`import { useState } from 'react';
import { EditorJavascript } from '@huomu/core';

function Demo() {
  const [value, setValue] = useState('');

  return (
    <div style={{ width: '500px', height: '500px' }}>
      <EditorJavascript value={value} onChange={setValue} />
    </div>
  );
}

export default Demo;`},react:{type:"NPM",value:"17.0.2"},"@huomu/core":{type:"NPM",value:"1.3.3"}},entry:"index.tsx"},context:{react:e(59496),"@huomu/core":e(60967)},renderOpts:{compile:function(){var f=J()(n()().mark(function r(){var P,u=arguments;return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,e.e(576).then(e.bind(e,47576));case 2:return M.abrupt("return",(P=M.sent).default.apply(P,u));case 3:case"end":return M.stop()}},r)}));function I(){return f.apply(this,arguments)}return I}()}}}},69059:function(j,d,e){e.r(d),e.d(d,{demos:function(){return g}});var x=e(90228),n=e.n(x),O=e(87999),s=e.n(O),T=e(59496),J=e(63207),g={"value_type_map-demo-0":{component:T.memo(T.lazy(s()(n()().mark(function R(){var v,f,I,r,P,u,H,M,l,w,b,V,Q,X;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return V=function(){return V=s()(n()().mark(function k(){var te;return n()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return te=M(5).map(function(ae){return{id:"".concat(ae),timeStr:"2024-10-01 10:00:00",timeNumber:+w("2024-10-01 10:00:00"),dateStr:"2024-10-01",dateNumber:+w("2024-10-01")}}),q.abrupt("return",Promise.resolve({data:{data:te,success:!0,totalSize:100}}));case 2:case"end":return q.stop()}},k)})),V.apply(this,arguments)},b=function(){return V.apply(this,arguments)},C.next=4,Promise.resolve().then(e.bind(e,60967));case 4:return v=C.sent,f=v.CURD,I=v.customValueTypeMap,r=v.CustomValueTypeEnum,C.next=10,Promise.resolve().then(e.bind(e,73975));case 10:return P=C.sent,u=P.ProConfigProvider,C.next=14,Promise.resolve().then(e.bind(e,15337));case 14:return H=C.sent,M=H.range,C.next=18,Promise.resolve().then(e.t.bind(e,28026,23));case 18:return l=C.sent,w=l.default,Q=function(){var k=[{title:"id",dataIndex:"id"},{title:"\u65F6\u95F4 str",dataIndex:"timeStr",valueType:r.CustomDateTimeAndDateRange,search:!0},{title:"\u65F6\u95F4 number",dataIndex:"timeNumber",valueType:r.CustomDateTimeAndDateRange,search:!0},{title:"\u65E5\u671F str",dataIndex:"dateStr",valueType:r.CustomDateAndDateRange,search:!0},{title:"\u65E5\u671F number",dataIndex:"dateNumber",valueType:r.CustomDateAndDateRange,search:!0}];return T.createElement(f,{actions:[],hmTableProps:{hmColumns:k,hmRequest:b}})},X=function(){return T.createElement(u,{valueTypeMap:I},T.createElement(Q,null))},C.abrupt("return",{default:X});case 23:case"end":return C.stop()}},R)})))),asset:{type:"BLOCK",id:"value_type_map-demo-0",refAtomIds:["value_type_map"],dependencies:{"index.tsx":{type:"FILE",value:`import { CURD, customValueTypeMap, CustomValueTypeEnum } from '@huomu/core';
import { ProConfigProvider } from '@ant-design/pro-components';
import { range } from 'lodash-es';
import dayjs from 'dayjs';

async function fakeHMRequest() {
  const data = range(5).map((item) => ({
    id: \`\${item}\`,
    timeStr: \`2024-10-01 10:00:00\`,
    timeNumber: +dayjs('2024-10-01 10:00:00'),
    dateStr: \`2024-10-01\`,
    dateNumber: +dayjs('2024-10-01'),
  }));

  return Promise.resolve({
    data: {
      data,
      success: true,
      totalSize: 100,
    },
  }) as Promise<any>;
}

const Table = () => {
  const hmColumns: any[] = [
    {
      title: 'id',
      dataIndex: 'id',
    },
    {
      title: '\u65F6\u95F4 str',
      dataIndex: 'timeStr',
      valueType: CustomValueTypeEnum.CustomDateTimeAndDateRange,
      search: true,
    },
    {
      title: '\u65F6\u95F4 number',
      dataIndex: 'timeNumber',
      valueType: CustomValueTypeEnum.CustomDateTimeAndDateRange,
      search: true,
    },
    {
      title: '\u65E5\u671F str',
      dataIndex: 'dateStr',
      valueType: CustomValueTypeEnum.CustomDateAndDateRange,
      search: true,
    },
    {
      title: '\u65E5\u671F number',
      dataIndex: 'dateNumber',
      valueType: CustomValueTypeEnum.CustomDateAndDateRange,
      search: true,
    },
  ];

  return (
    <CURD
      actions={[]}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeHMRequest,
      }}
    />
  );
};

const Demo = () => (
  <ProConfigProvider valueTypeMap={customValueTypeMap}>
    <Table />
  </ProConfigProvider>
);

export default Demo;`},"@huomu/core":{type:"NPM",value:"1.3.3"},"@ant-design/pro-components":{type:"NPM",value:"2.7.15"},"lodash-es":{type:"NPM",value:"4.17.21"},dayjs:{type:"NPM",value:"1.11.12"}},entry:"index.tsx"},context:{"@huomu/core":e(60967),"@ant-design/pro-components":e(73975),"lodash-es":e(15337),dayjs:e(28026)},renderOpts:{compile:function(){var R=s()(n()().mark(function f(){var I,r=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e.e(576).then(e.bind(e,47576));case 2:return u.abrupt("return",(I=u.sent).default.apply(I,r));case 3:case"end":return u.stop()}},f)}));function v(){return R.apply(this,arguments)}return v}()}}}},99512:function(j,d,e){e.r(d),e.d(d,{demos:function(){return O}});var x=e(59496),n=e(43797),O={}},99454:function(j,d,e){e.r(d),e.d(d,{demos:function(){return O}});var x=e(59496),n=e(8074),O={}},37209:function(j,d,e){e.r(d),e.d(d,{demos:function(){return O}});var x=e(59496),n=e(93112),O={}},20321:function(j,d,e){e.r(d),e.d(d,{ActionRef:function(){return Pe},Normal:function(){return Ee},ReadDetail:function(){return Te},Ref:function(){return xe},RemoteData:function(){return Ce}});var x=e(90228),n=e.n(x),O=e(87999),s=e.n(O),T=e(48305),J=e.n(T),g=e(26068),R=e.n(g),v=e(59496),f=e(60967),I=e(21941),r=e(68908),P=e(53992),u=e(32282),H=e(62802),M={\u5E7F\u5DDE:["\u767D\u4E91","\u9EC4\u57D4","\u589E\u57CE"],\u6DF1\u5733:["\u798F\u7530","\u5357\u5C71","\u5B9D\u5B89"]},l={HIGH:{text:"\u9AD8"},MEDIUM:{text:"\u4E2D"},LOW:{text:"\u4F4E"}},w=[{value:"0",label:"\u7B2C\u4E00\u5C0F\u5B66"},{value:"1",label:"\u7B2C\u4E8C\u5C0F\u5B66"},{value:"2",label:"\u7B2C\u4E09\u5C0F\u5B66"}];function b(c){return Math.floor(Math.random()*c)}function V(){return Object.keys(M)[b(Object.keys(M).length+1)]}function Q(c){if(c.city)return c.city&&M[c.city][b(M[c.city].length+1)]}function X(){return Object.keys(l)[b(Object.keys(l).length+1)]}function le(c){return(0,H.Z)(c).map(function(D){var B=V(),m=Q({city:B});return{id:"".concat(D),name:"\u8FD9\u662F\u540D\u5B57\u8FD9\u662F\u540D\u5B57 ".concat(D),city:B,area:m,level:X(),status:b(2)===1,school:""+b(w.length)}})}var C=le(21);function N(c){return k.apply(this,arguments)}function k(){return k=s()(n()().mark(function c(D){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("fakeHMRequest",D),m.abrupt("return",new Promise(function(A){setTimeout(function(){A({data:{data:C,success:!0,totalSize:C.length}})},1e3)}));case 2:case"end":return m.stop()}},c)})),k.apply(this,arguments)}function te(c){return re.apply(this,arguments)}function re(){return re=s()(n()().mark(function c(D){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("fakeHMDeleteById",D),C=C.filter(function(A){return A.id!==D.id}),m.abrupt("return",Promise.resolve({}));case 3:case"end":return m.stop()}},c)})),re.apply(this,arguments)}function q(c){return ae.apply(this,arguments)}function ae(){return ae=s()(n()().mark(function c(D){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("fakeHMGetById",D),m.abrupt("return",new Promise(function(A){setTimeout(function(){A({data:{data:C.find(function(ee){return ee.id===D.id})}})},1e3)}));case 2:case"end":return m.stop()}},c)})),ae.apply(this,arguments)}function ue(c){return ie.apply(this,arguments)}function ie(){return ie=s()(n()().mark(function c(D){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("fakeHMAdd",D),C.push(R()({id:C.length+1},D)),m.abrupt("return",Promise.resolve({}));case 3:case"end":return m.stop()}},c)})),ie.apply(this,arguments)}function he(c){return me.apply(this,arguments)}function me(){return me=s()(n()().mark(function c(D){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("fakeHMUpdateById",D),C=C.map(function(A){return A.id===D.id?R()(R()({},A),D):A}),m.abrupt("return",Promise.resolve({}));case 3:case"end":return m.stop()}},c)})),me.apply(this,arguments)}function _(){return Promise.resolve(Object.keys(M))}function ge(c){return c!=null&&c.city?Promise.resolve(M[c.city]):Promise.resolve(Object.values(M).reduce(function(D,B){return D.concat(B)},[]))}function De(){return Promise.resolve(w)}var F=e(4637),Ee=function(){var D=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57(\u7701\u7565)",dataIndex:"name",search:!0,ellipsis:!0},{title:"city",dataIndex:"city"},{title:"area",dataIndex:"area"}];return(0,F.jsx)(f.CURD,{actions:["create","read","delete","update"],hmTableProps:{hmColumns:D,hmRequest:N},deleteProps:{nameIndex:"name",deleteById:te},detailForm:function(m){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(r.Z,R()(R()({},m),{},{name:"name",label:"\u540D\u5B57",required:!0,rules:[{required:!0}]}))})},requestGetById:q,requestAdd:ue,requestUpdateById:he})};function Te(){var c=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,F.jsx)(f.CURD,{actions:["read_detail"],hmTableProps:{hmColumns:c,hmRequest:N}})}function xe(){var c=(0,v.useRef)(),D=P.A.useForm(),B=J()(D,1),m=B[0];window._detailFormInstance=m;var A=P.A.useWatch("name",c.current),ee=P.A.useWatch("name",m);console.log("useWatch",A,ee);var Z=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,F.jsx)(f.CURD,{actions:["create","read","update"],hmTableProps:{formRef:c,hmColumns:Z,hmRequest:N},detailFormInstance:m,detailForm:function(oe){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(r.Z,R()(R()({},oe),{},{name:"name",label:"\u540D\u5B57",required:!0,rules:[{required:!0}],initialValue:"default"})),(0,F.jsx)(u.Z,R()(R()({},oe),{},{name:"status",label:"\u5F00\u542F",initialValue:!1}))]})},requestGetById:q,requestAdd:ue,requestUpdateById:he})}function Pe(){var c=(0,v.useRef)(),D=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(I.ZP,{onClick:function(){var m;return(m=c.current.getActionRef().current)===null||m===void 0?void 0:m.reload()},children:"reload"}),(0,F.jsx)(f.CURD,{ref:c,actions:[],hmTableProps:{hmColumns:D,hmRequest:N}})]})}function Ce(){var c=[{title:"id",dataIndex:"id",search:!0},{title:"\u540D\u5B57",dataIndex:"name",search:!0},{title:"\u7B49\u7EA7(\u672C\u5730\u6570\u636E)",dataIndex:"level",search:!0,valueEnum:l},{title:"city(\u8FDC\u7AEF\u6570\u636E)",dataIndex:"city",search:!0,request:function(){var D=s()(n()().mark(function m(){var A;return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,_();case 2:return A=Z.sent,Z.abrupt("return",A.map(function(G){return{label:G,value:G}})||[]);case 4:case"end":return Z.stop()}},m)}));function B(){return D.apply(this,arguments)}return B}()},{title:"area(\u8054\u52A8 city)",dataIndex:"area",search:!0,request:function(){var D=s()(n()().mark(function m(A){var ee;return n()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log("params",A),G.next=3,ge(A);case 3:return ee=G.sent,G.abrupt("return",ee.map(function(oe){return{label:oe,value:oe}})||[]);case 5:case"end":return G.stop()}},m)}));function B(m){return D.apply(this,arguments)}return B}(),dependencies:["city"]},{title:"\u5B66\u6821(\u8FDC\u7AEF\u6570\u636E label value)",dataIndex:"school",search:!0,valueType:"select",request:function(){return De()}}];return(0,F.jsx)(f.CURD,{actions:[],hmTableProps:{hmColumns:c,hmRequest:N}})}},60967:function(j,d,e){e.r(d),e.d(d,{CURD:function(){return ie},CURDDetail:function(){return ue},CustomValueTypeEnum:function(){return ve},EditorJSON:function(){return D},EditorJavascript:function(){return Ce},EditorMarkdown:function(){return ee},FileUpload:function(){return oe},HMDescriptions:function(){return De},HMTable:function(){return Q},NumberSwitch:function(){return Se},OperateDelete:function(){return N},createStore:function(){return be},customValueTypeMap:function(){return Ve},getTableScroll:function(){return X},useDelete:function(){return C}});var x=e(15558),n=e.n(x),O=e(26068),s=e.n(O),T=e(73197),J=e(21941),g=e(59496),R=e(5791),v=e(33553),f=e(90228),I=e.n(f),r=e(67825),P=e.n(r),u=e(87999),H=e.n(u),M=e(19525),l=e(4637),w=["current","pageSize"],b=["hmRequest","request","hmColumns","columns","rowKey"];function V(t){return function(){var a=H()(I()().mark(function o(i){var h,p,y,E;return I()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return h=i.current,p=i.pageSize,y=P()(i,w),L.next=3,t(s()({page:h,pageSize:p},y));case 3:return E=L.sent,L.abrupt("return",{data:E.data.data,success:E.data.success,total:E.data.totalSize});case 5:case"end":return L.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()}function Q(t){var a=t.hmRequest,o=t.request,i=t.hmColumns,h=t.columns,p=t.rowKey,y=p===void 0?"id":p,E=P()(t,b),$=(0,g.useCallback)(function(z){return a?V(a)(z):o(z,{},{})},[a,o]),L=(0,g.useMemo)(function(){return i?i.map(function(z){return s()({search:!1},z)}):h},[h,i]);return(0,l.jsx)(M.Z,s()({cardBordered:!0,rowKey:y,pagination:s()({showSizeChanger:!0,showQuickJumper:!0},E.pagination),options:!1,request:$,columns:L},E))}function X(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:120,o={x:0,y:void 0};return t==null||t.forEach(function(i){i.hideInTable||(o.x+=Number(i.width)||a)}),o}var le=e(90037);function C(t){var a=t.name,o=t.desc,i=t.onDelete,h=(0,g.useCallback)(function(){le.Z.confirm({title:"\u786E\u8BA4\u5220\u9664 \u201C".concat(a,"\u201D \u5417\uFF1F"),content:o||"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){i()}})},[a,o,i]);return{doDelete:h}}function N(t){var a=t.name,o=t.desc,i=t.onDelete,h=(0,g.useCallback)(function(){le.Z.confirm({title:"\u786E\u8BA4\u5220\u9664 \u201C".concat(a,"\u201D \u5417\uFF1F"),content:o||"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){i()}})},[a,o,i]);return(0,l.jsx)("a",{style:{color:"red"},onClick:h,children:"\u5220\u9664"})}var k=e(48305),te=e.n(k),re=e(75379),q=e(53992),ae=e(33417);function ue(t){var a=t.action,o=t.id,i=t.record,h=t.trigger,p=t.onSuccess,y=t.detailForm,E=t.requestGetById,$=t.requestGetByRecord,L=t.requestAdd,z=t.requestUpdateById,pe=t.detailFormInstance,ye=(0,g.useState)(!1),ce=te()(ye,2),ne=ce[0],fe=ce[1],se=q.A.useForm(pe),Ie=te()(se,1),U=Ie[0],Re=(0,g.useCallback)(function(){var de=H()(I()().mark(function S(Ue){return I()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(W.prev=0,!(a==="create"&&L)){W.next=5;break}return W.next=4,L(Ue);case 4:re.ZP.open({type:"success",content:"\u521B\u5EFA\u6210\u529F"});case 5:if(!(a==="update"&&z)){W.next=9;break}return W.next=8,z(s()(s()({},Ue),{},{id:o}));case 8:re.ZP.open({type:"success",content:"\u66F4\u65B0\u6210\u529F"});case 9:return p==null||p(),W.abrupt("return",!0);case 13:W.prev=13,W.t0=W.catch(0),setTimeout(function(){throw W.t0},10);case 16:case"end":return W.stop()}},S,null,[[0,13]])}));return function(S){return de.apply(this,arguments)}}(),[a,L,z,p,o]),K=(0,g.useCallback)(function(de){if(!de){U==null||U.resetFields(),fe(de);return}if(fe(de),o){if(E)return E({id:o}).then(function(S){U==null||U.setFieldsValue(S.data.data)});if($)return $(i).then(function(S){U==null||U.setFieldsValue(S.data.data)})}},[U,o,E,$,i]),Y=(0,g.useMemo)(function(){return!ne||!y?null:y({readonly:a==="read"&&!!o},{action:a})},[ne,y,a,o]);return(0,l.jsxs)(ae.a,{form:U,trigger:h,autoFocusFirstInput:!0,onFinish:Re,onOpenChange:K,layout:"vertical",readonly:a==="read"&&!!o,drawerProps:{destroyOnClose:!0},children:[(0,l.jsx)("div",{className:"h-[20px]"}),Y]})}var ie=(0,g.forwardRef)(function(a,o){var i=a.actions,h=a.hmTableProps,p=a.createButton,y=a.deleteProps,E=a.detailIdIndex,$=a.detailForm,L=a.requestGetById,z=a.requestGetByRecord,pe=a.requestAdd,ye=a.requestUpdateById,ce=a.detailFormInstance,ne=(0,g.useRef)(),fe=(0,R.TH)();(0,g.useImperativeHandle)(o,function(){return{getActionRef:function(){return ne}}},[ne]);var se=(0,g.useMemo)(function(){return{detailForm:$,requestGetById:L,requestGetByRecord:z,requestAdd:pe,requestUpdateById:ye,detailFormInstance:ce}},[$,pe,L,z,ye,ce]),Ie=(0,g.useCallback)(function(K){return function(){if(y!=null&&y.deleteById)return y.deleteById({id:K.id,ids:[K.id]}).then(function(){var Y;(Y=ne.current)===null||Y===void 0||Y.reload()});if(y!=null&&y.deleteByRecord)return y.deleteByRecord(K).then(function(){var Y;(Y=ne.current)===null||Y===void 0||Y.reload()});throw new Error("\u6CA1\u6709\u4F20 deleteById or deleteByRecord")}},[y]),U=(0,g.useCallback)(function(){var K;(K=ne.current)===null||K===void 0||K.reload()},[]),Re=(0,g.useMemo)(function(){var K={title:"\u64CD\u4F5C",fixed:"right",width:120,render:function(de,S){return(0,l.jsxs)(T.Z,{children:[i.includes("read")&&(0,l.jsx)(ue,s()({id:S.id,record:S,onSuccess:U,trigger:(0,l.jsx)("a",{children:"\u67E5\u770B"}),action:"read"},se)),i.includes("read_detail")&&(0,l.jsx)(v.rU,{to:"".concat(fe.pathname,"/detail/").concat(S[E||"id"]),children:"\u67E5\u770B"}),i.includes("update")&&(0,l.jsx)(ue,s()({id:S.id,record:S,onSuccess:U,trigger:(0,l.jsx)("a",{children:"\u7F16\u8F91"}),action:"update"},se)),i.includes("delete")&&y&&(0,l.jsx)(N,{name:S[y.nameIndex],desc:y.desc,onDelete:Ie(S)})]})}};return i.includes("read")||i.includes("read_detail")||i.includes("update")||i.includes("delete")?[].concat(n()(h.hmColumns||h.columns||[]),[K]):h.hmColumns},[i,y,E,se,Ie,U,h.columns,h.hmColumns,fe.pathname]);return(0,l.jsx)("div",{className:"",children:(0,l.jsx)(Q,s()(s()({rowKey:"id"},h),{},{scroll:X(Re),actionRef:ne,toolBarRender:function(){return[].concat(n()(h.toolBarRender?h.toolBarRender.apply(h,arguments):[]),[i.includes("create")&&(0,l.jsx)(ue,s()({onSuccess:U,trigger:p||(0,l.jsx)(J.ZP,{type:"primary",children:"\u65B0\u5EFA"}),action:"create"},se))])},search:s()({layout:"vertical",defaultCollapsed:!1},h.search),hmColumns:Re}))})}),he=e(66850),me=e(28026),_=e.n(me),ge=["hmItems","items"];function De(t){var a=t.hmItems,o=t.items,i=P()(t,ge),h=(0,g.useMemo)(function(){return a?a.map(function(p){var y=p.children;return p.children!==null&&p.children!==void 0&&(p.valueType==="date"?y=_()(y).format("YYYY-MM-DD"):p.valueType==="dateTime"?y=_()(y).format("YYYY-MM-DD HH:mm:ss"):p.valueType==="time"&&(y=_()(y).format("HH:mm:ss"))),s()(s()({},p),{},{children:y||"-"})}):o},[a,o]);return(0,l.jsx)(he.Z,s()({items:h},i))}var F=e(34019),Ee=e(65273),Te=e(59590),xe=e(32479),Pe={width:"100%",height:"100%"};function Ce(t){var a=t.value,o=t.onChange,i=t.readonly;return(0,l.jsx)(F.ZP,{style:Pe,mode:"javascript",theme:"monokai",value:a,onChange:o,readOnly:i,name:"javascript_editor",editorProps:{$blockScrolling:!0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}})}var c=e(26494);function D(t){var a=t.value,o=t.onChange,i=t.readonly,h=(0,g.useRef)(null),p=(0,g.useRef)(null),y=(0,g.useRef)(o);return(0,g.useEffect)(function(){var E;(E=p.current)===null||E===void 0||E.update({text:a||""})},[a]),(0,g.useEffect)(function(){p.current=new c.q9({target:h.current,props:{mode:c.AR.text,readOnly:i,content:{text:a||""},onChange:function($){y.current($.text)}}})},[]),(0,l.jsx)("div",{ref:h,className:"h-full w-full"})}var B=e(70876),m=e(51709),A=["children","className","node"];function ee(t){var a=t.value;return(0,l.jsx)(B.U,{unwrapDisallowed:!0,components:{code:function(i){var h=i.children,p=i.className,y=i.node,E=P()(i,A),$=/language-(\w+)/.exec(p||"");return $?(0,l.jsx)(m.Z,s()(s()({},E),{},{PreTag:"div",wrapLongLines:!0,children:String(h).replace(/\n$/,""),language:$[1].toLowerCase()})):(0,l.jsx)("code",s()(s()({},E),{},{className:p,children:h}))}},children:a||""})}var Z=e(55860),G=e(12592);function oe(t){var a=t.value,o=t.onChange,i=function(y){return o==null||o(y),!1},h=function(){o==null||o(void 0)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(G.Z,{name:"file",maxCount:1,showUploadList:!0,fileList:a?[a]:void 0,beforeUpload:i,onRemove:h,children:(0,l.jsx)(J.ZP,{icon:(0,l.jsx)(Z.Z,{}),children:"\u70B9\u51FB\u9009\u62E9\u6587\u4EF6"})})})}var Le=e(91880),$e=["value","onChange"];function Se(t){var a=t.value,o=t.onChange,i=P()(t,$e);return(0,l.jsx)(Le.Z,s()(s()({},i),{},{value:!!a,onChange:function(p){return o==null?void 0:o(Number(p))}}))}var Me=e(64934),Ke=e(65124),We=function(a){return function(o,i,h){var p=(0,Ke.mW)(a);return p(o,i,h)}},Be=We,be=function(a){return a?(0,Me.Ue)()(Be(a)):function(o){return(0,Me.Ue)()(Be(o))}},Ne=e(82092),Ae=e.n(Ne),Ge=e(85003),He=e(83873);function Oe(t){return(0,He.Z)(t)&&/^\d+$/.test(t)?_()(parseInt(t)):_()(t)}var ve=function(t){return t.CustomDateTimeAndDateRange="CustomDateTimeAndDateRange",t.CustomDateAndDateRange="CustomDateAndDateRange",t}(ve||{}),Fe={dateTime:function(a){return a?(0,l.jsx)("div",{children:Oe(a).format("YYYY-MM-DD HH:mm:ss")}):(0,l.jsx)("div",{children:"-"})},date:function(a){return a?(0,l.jsx)("div",{children:Oe(a).format("YYYY-MM-DD")}):(0,l.jsx)("div",{children:"-"})}},je={dateRange:function(a,o){return(0,l.jsx)(Ge.Z,s()(s()({},o),{},{fieldProps:s()(s()({},o.fieldProps),{},{onChange:function(h){var p,y,E=h&&[_()(h[0]).startOf("day"),_()(h[1]).endOf("day")];(p=(y=o.fieldProps).onChange)===null||p===void 0||p.call(y,E)}})}))}},Ve=Ae()(Ae()({},ve.CustomDateTimeAndDateRange,{render:Fe.dateTime,renderFormItem:je.dateRange}),ve.CustomDateAndDateRange,{render:Fe.date,renderFormItem:je.dateRange})},63537:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(39278);const n=[{value:`// commitlint.config.js
module.exports = { extends: ['@huomu/commit-lint'] };
`,paraId:0,tocIndex:0}]},33517:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(76517);const n=[{value:"\u9700\u8981\u975E\u5E38\u4E86\u89E3 ant pro-components ProForm ProTable",paraId:0,tocIndex:0},{value:"\u57FA\u4E8E ant pro-components \u901A\u7528\u7684 CURD \u7EC4\u4EF6\uFF0C\u540C\u65F6\u4FDD\u7559\u6269\u5C55\u6027\u3002",paraId:1,tocIndex:0},{value:"\u8C03\u6574 actions \u4E3A ",paraId:2,tocIndex:3},{value:"['read_detail']",paraId:2,tocIndex:3},{value:"\uFF0C\u70B9\u51FB<\u67E5\u770B>\u8DF3\u8F6C\u5230 ",paraId:2,tocIndex:3},{value:"xxx/detail/[id]",paraId:2,tocIndex:3},{value:"\uFF0C",paraId:2,tocIndex:3},{value:"\u83B7\u53D6 ProTable \u7684 actionRef",paraId:3,tocIndex:5},{value:"\u901A\u8FC7 ref \u4F60\u53EF\u4EE5\u505A\u66F4\u591A\u64CD\u4F5C",paraId:4,tocIndex:6},{value:`import type { ReactNode } from 'react';
import type { HMTableProps } from '../table';
import type { ProFormInstance, ActionType } from '@ant-design/pro-components';

/**
 * create \u521B\u5EFA
 * read \u67E5\u770B
 * read_detail \u8BE6\u60C5\u9875\u67E5\u770B
 * update \u7F16\u8F91
 * delete \u5220\u9664
 */
type CurdAction = 'create' | 'read' | 'read_detail' | 'update' | 'delete';

interface CURDProps {
  actions: CurdAction[];

  /** \u8868\u683C\u76F8\u5173 */
  hmTableProps: HMTableProps;

  /** \u5220\u9664\u76F8\u5173 */
  deleteProps?: {
    /** \u663E\u793A\u540D\u79F0\u7D22\u5F15 */
    nameIndex: string;
    /** \u5220\u9664\u63A5\u53E3 */
    deleteById?: ({ id, ids }) => Promise<any>;
    deleteByRecord?: (record) => Promise<any>;
    desc?: string;
  };

  /** \u65B0\u5EFA\u6309\u94AE\uFF0C\u9ED8\u8BA4\u65B0\u5EFA */
  createButton?: ReactNode;

  /** \u5F39\u7A97\u8868\u5355 */
  detailForm?: (formProps: { readonly: boolean }, info: { action: CurdAction }) => ReactNode;
  /** detailForm \u7684 formRef */
  detailFormInstance?: ProFormInstance;

  /** \u65B0\u589E\u63A5\u53E3 */
  requestAdd?: (values) => Promise<any>;
  /** \u66F4\u65B0\u63A5\u53E3 */
  requestUpdateById?: (values) => Promise<any>;

  /** \u83B7\u53D6\u8BE6\u60C5\u63A5\u53E3 */
  requestGetById?: ({ id }) => Promise<any>;
  /** \u83B7\u53D6\u8BE6\u60C5\u63A5\u53E3\uFF0C\u975E id \u7684\u65F6\u5019 */
  requestGetByRecord?: (record) => Promise<any>;

  /** \u8DF3\u8F6C\u5230\u8BE6\u60C5\u7684 id \u6240\u4EE5\uFF0C\u9ED8\u8BA4 id */
  detailIdIndex?: string;
}

interface CURDMethods {
  getActionRef: () => React.MutableRefObject<ActionType | undefined>;
}
`,paraId:5,tocIndex:7}]},27823:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(76646);const n=[{value:`interface EditorJavascriptProps {
  value: string;
  onChange: (value: string, event?: any) => void;
  readonly?: boolean;
}
`,paraId:0,tocIndex:1}]},81541:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(63207);const n=[{value:"\u81EA\u5B9A\u4E49 valueType",paraId:0,tocIndex:0},{value:`import { customValueTypeMap } from '@huomu/core';
import { ProConfigProvider } from '@ant-design/pro-components';

const Demo = () => (
  <ProConfigProvider valueTypeMap={customValueTypeMap}>
    <div>some</div>
  </ProConfigProvider>
);

export default Demo;
`,paraId:1,tocIndex:1},{value:`enum CustomValueTypeEnum {
  /** \u6E32\u67D3\u65F6\u95F4 + \u641C\u7D22\u65E5\u671F\u8303\u56F4 */
  CustomDateTimeAndDateRange = 'CustomDateTimeAndDateRange',
  /** \u6E32\u67D3\u65E5\u671F + \u641C\u7D22\u65E5\u671F\u8303\u56F4 */
  CustomDateAndDateRange = 'CustomDateAndDateRange',
}
`,paraId:2,tocIndex:2}]},73755:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(43797);const n=[{value:`// .eslintrc.js
module.exports = {
  extends: ['@huomu/eslint-config-base'],
};
`,paraId:0,tocIndex:0}]},50256:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(8074);const n=[{value:`Usage: index [options] [command]

Options:
  -V, --version         output the version number
  -h, --help            display help for command

Commands:
  build_api [options]   swagger \u6587\u6863\u751F\u6210 API \u65B9\u6CD5
  build_enum [options]  \u6839\u636E\u679A\u4E3E\u751F\u6210\u4EE3\u7801
  help [command]        display help for command
`,paraId:0,tocIndex:0}]},18905:function(j,d,e){e.r(d),e.d(d,{texts:function(){return n}});var x=e(93112);const n=[{value:`// .stylelintrc.js
module.exports = {
  extends: ['@huomu/style-lint'],
};
`,paraId:0,tocIndex:0}]},31725:function(j,d){d.Z=`import React, { useRef } from 'react';
import type { CURDProps } from '@huomu/core';
import { CURD } from '@huomu/core';
import { Button } from 'antd';
import { ProForm, ProFormSwitch, ProFormText } from '@ant-design/pro-components';
import {
  fakeRequest,
  fakeDeleteById,
  fakeAdd,
  fakeGetById,
  fakeUpdateById,
  fakeRequestCity,
  fakeRequestArea,
  levels,
  fakeRequestSchool,
} from './data';

const Normal = () => {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57(\u7701\u7565)',
      dataIndex: 'name',
      search: true,
      ellipsis: true,
    },
    {
      title: 'city',
      dataIndex: 'city',
    },
    {
      title: 'area',
      dataIndex: 'area',
    },
  ];

  return (
    <CURD
      actions={['create', 'read', 'delete', 'update']}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
      deleteProps={{
        nameIndex: 'name',
        deleteById: fakeDeleteById,
      }}
      detailForm={(formProps) => (
        <>
          <ProFormText
            {...formProps}
            name="name"
            label="\u540D\u5B57"
            required
            rules={[{ required: true }]}
          />
        </>
      )}
      requestGetById={fakeGetById}
      requestAdd={fakeAdd}
      requestUpdateById={fakeUpdateById}
    />
  );
};

function ReadDetail() {
  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <CURD
      actions={['read_detail']}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
    />
  );
}

function Ref() {
  const formRef = useRef<any>();
  const [detailFormInstance] = ProForm.useForm();

  // @ts-ignore
  window._detailFormInstance = detailFormInstance;

  const name = ProForm.useWatch('name', formRef.current);
  const detailName = ProForm.useWatch('name', detailFormInstance);

  // \u4E0D\u77E5\u9053\u4E3A\u5565\u8FD9\u91CC name \u4E0D\u751F\u6548\uFF0C\u4F46\u662F\u9879\u76EE\u91CC\u662F\u751F\u6548\u7684\u3002\u5148\u5FFD\u7565
  console.log('useWatch', name, detailName);

  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <CURD
      actions={['create', 'read', 'update']}
      hmTableProps={{
        formRef,
        hmColumns,
        hmRequest: fakeRequest,
      }}
      detailFormInstance={detailFormInstance}
      detailForm={(formProps) => (
        <>
          <ProFormText
            {...formProps}
            name="name"
            label="\u540D\u5B57"
            required
            rules={[{ required: true }]}
            initialValue={'default'}
          />
          <ProFormSwitch {...formProps} name="status" label="\u5F00\u542F" initialValue={false} />
        </>
      )}
      requestGetById={fakeGetById}
      requestAdd={fakeAdd}
      requestUpdateById={fakeUpdateById}
    />
  );
}

function ActionRef() {
  const ref = useRef<any>();

  const hmColumns = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
  ];

  return (
    <>
      <Button onClick={() => ref.current.getActionRef().current?.reload()}>reload</Button>
      <CURD
        ref={ref}
        actions={[]}
        hmTableProps={{
          hmColumns,
          hmRequest: fakeRequest,
        }}
      />
    </>
  );
}

function RemoteData() {
  const hmColumns: CURDProps['hmTableProps']['hmColumns'] = [
    {
      title: 'id',
      dataIndex: 'id',
      search: true,
    },
    {
      title: '\u540D\u5B57',
      dataIndex: 'name',
      search: true,
    },
    {
      title: '\u7B49\u7EA7(\u672C\u5730\u6570\u636E)',
      dataIndex: 'level',
      search: true,
      valueEnum: levels,
    },
    {
      title: 'city(\u8FDC\u7AEF\u6570\u636E)',
      dataIndex: 'city',
      search: true,
      request: async () => {
        const res = await fakeRequestCity();

        return (
          res.map((item) => ({
            label: item,
            value: item,
          })) || []
        );
      },
    },
    {
      title: 'area(\u8054\u52A8 city)',
      dataIndex: 'area',
      search: true,
      request: async (params) => {
        console.log('params', params);
        const res = await fakeRequestArea(params);

        return (
          res.map((item) => ({
            label: item,
            value: item,
          })) || []
        );
      },
      dependencies: ['city'],
    },
    {
      title: '\u5B66\u6821(\u8FDC\u7AEF\u6570\u636E label value)',
      dataIndex: 'school',
      search: true,
      valueType: 'select',
      request: () => fakeRequestSchool(),
    },
  ];

  return (
    <CURD
      actions={[]}
      hmTableProps={{
        hmColumns,
        hmRequest: fakeRequest,
      }}
    />
  );
}

export { Normal, ReadDetail, Ref, ActionRef, RemoteData };
`}}]);
